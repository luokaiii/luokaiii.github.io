<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="描述"><meta name="keywords" content="1,2,3"><meta name="author" content="koral"><meta name="copyright" content="koral"><title>凯 | 凯</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">koral</div><div class="author-info__description text-center">描述</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives/index.html"><span class="pull-left">文章</span><span class="pull-right">207</span></a><a class="author-info-articles__tags article-meta" href="/tags/index.html"><span class="pull-left">标签</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories/index.html"><span class="pull-left">分类</span><span class="pull-right">28</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/index.html">凯</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives/index.html">归档</a><a class="site-page" href="/tags/index.html">标签</a><a class="site-page" href="/categories/index.html">分类</a><a class="site-page" href="/about/index.html">关于我</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">凯</div><div id="site-sub-title">凯</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/29/后端/java/regex/index.html">正则表达式</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-29</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java成神之路/index.html">Java成神之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/java/index.html">java</a></span><div class="content"><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h2><blockquote>
<p>正则表达式是一组由字母和符号组成的特殊文本, 它可以用来从文本中找出满足你想要的格式的句子.</p>
</blockquote>
<p>一个正则表达式是在一个主体字符串中从左到右匹配字符串时的一种样式.<br>“Regular expression”这个词比较拗口, 我们常使用缩写的术语”regex”或”regexp”.<br>正则表达式可以从一个基础字符串中根据一定的匹配模式替换文本中的字符串、验证表单、提取字符串等等.</p>
<p>想象你正在写一个应用, 然后你想设定一个用户命名的规则, 让用户名包含字符,数字,下划线和连字符,以及限制字符的个数,好让名字看起来没那么丑.<br>我们使用以下正则表达式来验证一个用户名:</p>
<p>以上的正则表达式可以接受 <code>john_doe</code>, <code>jo-hn_doe</code>, <code>john12_as</code>.<br>但不匹配<code>Jo</code>, 因为它包含了大写的字母而且太短了.</p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ul>
<li><a href="#1-基本匹配">1. 基本匹配</a></li>
<li><a href="#2-元字符">2. 元字符</a><ul>
<li><a href="#21-点运算符-">2.1 点运算符 .</a></li>
<li><a href="#22-字符集">2.2 字符集</a><ul>
<li><a href="#221-否定字符集">2.2.1 否定字符集</a><ul>
<li><a href="#23-重复次数">2.3 重复次数</a></li>
</ul>
</li>
<li><a href="#231--号">2.3.1 * 号</a></li>
<li><a href="#232--号">2.3.2   号</a></li>
<li><a href="#233--号">2.3.3 ? 号</a><ul>
<li><a href="#24--号">2.4 {} 号</a></li>
<li><a href="#25--特征标群">2.5 (…) 特征标群</a></li>
<li><a href="#26--或运算符">2.6 | 或运算符</a></li>
<li><a href="#27-转码特殊字符">2.7 转码特殊字符</a></li>
<li><a href="#28-锚点">2.8 锚点</a></li>
</ul>
</li>
<li><a href="#281--号">2.8.1 ^ 号</a></li>
<li><a href="#282--号">2.8.2 $ 号</a><ul>
<li><a href="#3-简写字符集">3. 简写字符集</a></li>
<li><a href="#4-前后关联约束前后预查">4. 前后关联约束(前后预查)</a></li>
<li><a href="#41--前置约束存在">4.1 ?=… 前置约束(存在)</a></li>
<li><a href="#42--前置约束-排除">4.2 ?!… 前置约束-排除</a></li>
<li><a href="#43---后置约束-存在">4.3 ?&lt;= … 后置约束-存在</a></li>
<li><a href="#44--后置约束-排除">4.4 ?&lt;!… 后置约束-排除</a></li>
<li><a href="#5-标志">5. 标志</a></li>
<li><a href="#51-忽略大小写-case-insensitive">5.1 忽略大小写 (Case Insensitive)</a></li>
<li><a href="#52-全局搜索-global-search">5.2 全局搜索 (Global search)</a></li>
<li><a href="#53-多行修饰符-multiline">5.3 多行修饰符 (Multiline)</a></li>
<li><a href="#额外补充">额外补充</a></li>
<li><a href="#贡献">贡献</a></li>
<li><a href="#许可证">许可证</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-基本匹配"><a href="#1-基本匹配" class="headerlink" title="1. 基本匹配"></a>1. 基本匹配</h2><p>正则表达式其实就是在执行搜索时的格式, 它由一些字母和数字组合而成.<br>例如: 一个正则表达式 <code>the</code>, 它表示一个规则: 由字母<code>t</code>开始,接着是<code>h</code>,再接着是<code>e</code>.</p>
<pre>
"the" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.
</pre>

<p><a href="https://regex101.com/r/dmRygT/1" target="_blank" rel="noopener">在线练习</a></p>
<p>正则表达式<code>123</code>匹配字符串<code>123</code>. 它逐个字符的与输入的正则表达式做比较.</p>
<p>正则表达式是大小写敏感的, 所以<code>The</code>不会匹配<code>the</code>.</p>
<pre>
"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.
</pre>

<p><a href="https://regex101.com/r/1paXsy/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-元字符"><a href="#2-元字符" class="headerlink" title="2. 元字符"></a>2. 元字符</h2><p>正则表达式主要依赖于元字符.<br>元字符不代表他们本身的字面意思, 他们都有特殊的含义. 一些元字符写在方括号中的时候有一些特殊的意思. 以下是一些元字符的介绍:</p>
<table>
<thead>
<tr>
<th align="center">元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td>句号匹配任意单个字符除了换行符.</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td>字符种类. 匹配方括号内的任意字符.</td>
</tr>
<tr>
<td align="center">[^ ]</td>
<td>否定的字符种类. 匹配除了方括号里的任意字符</td>
</tr>
<tr>
<td align="center">*</td>
<td>匹配&gt;=0个重复的在*号之前的字符.</td>
</tr>
<tr>
<td align="center">+</td>
<td>匹配&gt;=1个重复的+号前的字符.</td>
</tr>
<tr>
<td align="center">?</td>
<td>标记?之前的字符为可选.</td>
</tr>
<tr>
<td align="center">{n,m}</td>
<td>匹配num个大括号之前的字符 (n &lt;= num &lt;= m).</td>
</tr>
<tr>
<td align="center">(xyz)</td>
<td>字符集, 匹配与 xyz 完全相等的字符串.</td>
</tr>
<tr>
<td align="center">&#124;</td>
<td>或运算符,匹配符号前或后的字符.</td>
</tr>
<tr>
<td align="center">&#92;</td>
<td>转义字符,用于匹配一些保留的字符 <code>[ ] ( ) { } . * + ? ^ $ \ &#124;</code></td>
</tr>
<tr>
<td align="center">^</td>
<td>从开始行开始匹配.</td>
</tr>
<tr>
<td align="center">$</td>
<td>从末端开始匹配.</td>
</tr>
</tbody></table>
<h2 id="2-1-点运算符"><a href="#2-1-点运算符" class="headerlink" title="2.1 点运算符 ."></a>2.1 点运算符 <code>.</code></h2><p><code>.</code>是元字符中最简单的例子.<br><code>.</code>匹配任意单个字符, 但不匹配换行符.<br>例如, 表达式<code>.ar</code>匹配一个任意字符后面跟着是<code>a</code>和<code>r</code>的字符串.</p>
<pre>
".ar" => The <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.
</pre>

<p><a href="https://regex101.com/r/xc9GkU/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-2-字符集"><a href="#2-2-字符集" class="headerlink" title="2.2 字符集"></a>2.2 字符集</h2><p>字符集也叫做字符类.<br>方括号用来指定一个字符集.<br>在方括号中使用连字符来指定字符集的范围.<br>在方括号中的字符集不关心顺序.<br>例如, 表达式<code>[Tt]he</code> 匹配 <code>the</code> 和 <code>The</code>.</p>
<pre>
"[Tt]he" => <a href="#learn-regex"><strong>The</strong></a> car parked in <a href="#learn-regex"><strong>the</strong></a> garage.
</pre>

<p><a href="https://regex101.com/r/2ITLQ4/1" target="_blank" rel="noopener">在线练习</a></p>
<p>方括号的句号就表示句号.<br>表达式 <code>ar[.]</code> 匹配 <code>ar.</code>字符串</p>
<pre>
"ar[.]" => A garage is a good place to park a c<a href="#learn-regex"><strong>ar.</strong></a>
</pre>

<p><a href="https://regex101.com/r/wL3xtE/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="2-2-1-否定字符集"><a href="#2-2-1-否定字符集" class="headerlink" title="2.2.1 否定字符集"></a>2.2.1 否定字符集</h3><p>一般来说 <code>^</code> 表示一个字符串的开头, 但它用在一个方括号的开头的时候, 它表示这个字符集是否定的.<br>例如, 表达式<code>[^c]ar</code> 匹配一个后面跟着<code>ar</code>的除了<code>c</code>的任意字符.</p>
<pre>
"[^c]ar" => The car <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.
</pre>

<p><a href="https://regex101.com/r/nNNlq3/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-3-重复次数"><a href="#2-3-重复次数" class="headerlink" title="2.3 重复次数"></a>2.3 重复次数</h2><p>后面跟着元字符 <code>+</code>, <code>*</code> or <code>?</code> 的, 用来指定匹配子模式的次数.<br>这些元字符在不同的情况下有着不同的意思.</p>
<h3 id="2-3-1-号"><a href="#2-3-1-号" class="headerlink" title="2.3.1 * 号"></a>2.3.1 <code>*</code> 号</h3><p><code>*</code>号匹配 在<code>*</code>之前的字符出现<code>大于等于0</code>次.<br>例如, 表达式 <code>a*</code> 匹配以0或更多个a开头的字符, 因为有0个这个条件, 其实也就匹配了所有的字符. 表达式<code>[a-z]*</code> 匹配一个行中所有以小写字母开头的字符串.</p>
<pre>
"[a-z]*" => T<a href="#learn-regex"><strong>he</strong></a> <a href="#learn-regex"><strong>car</strong></a> <a href="#learn-regex"><strong>parked</strong></a> <a href="#learn-regex"><strong>in</strong></a> <a href="#learn-regex"><strong>the</strong></a> <a href="#learn-regex"><strong>garage</strong></a> #21.
</pre>

<p><a href="https://regex101.com/r/7m8me5/1" target="_blank" rel="noopener">在线练习</a></p>
<p><code>*</code>字符和<code>.</code>字符搭配可以匹配所有的字符<code>.*</code>.<br><code>*</code>和表示匹配空格的符号<code>\s</code>连起来用, 如表达式<code>\s*cat\s*</code>匹配0或更多个空格开头和0或更多个空格结尾的cat字符串.</p>
<pre>
"\s*cat\s*" => The fat<a href="#learn-regex"><strong> cat </strong></a>sat on the <a href="#learn-regex">con<strong>cat</strong>enation</a>.
</pre>

<p><a href="https://regex101.com/r/gGrwuz/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="2-3-2-号"><a href="#2-3-2-号" class="headerlink" title="2.3.2 + 号"></a>2.3.2 <code>+</code> 号</h3><p><code>+</code>号匹配<code>+</code>号之前的字符出现 &gt;=1 次.<br>例如表达式<code>c.+t</code> 匹配以首字母<code>c</code>开头以<code>t</code>结尾,中间跟着任意个字符的字符串.</p>
<pre>
"c.+t" => The fat <a href="#learn-regex"><strong>cat sat on the mat</strong></a>.
</pre>

<p><a href="https://regex101.com/r/Dzf9Aa/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="2-3-3-号"><a href="#2-3-3-号" class="headerlink" title="2.3.3 ? 号"></a>2.3.3 <code>?</code> 号</h3><p>在正则表达式中元字符 <code>?</code> 标记在符号前面的字符为可选, 即出现 0 或 1 次.<br>例如, 表达式 <code>[T]?he</code> 匹配字符串 <code>he</code> 和 <code>The</code>.</p>
<pre>
"[T]he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.
</pre>

<p><a href="https://regex101.com/r/cIg9zm/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"[T]?he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in t<a href="#learn-regex"><strong>he</strong></a> garage.
</pre>

<p><a href="https://regex101.com/r/kPpO2x/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-4-号"><a href="#2-4-号" class="headerlink" title="2.4 {} 号"></a>2.4 <code>{}</code> 号</h2><p>在正则表达式中 <code>{}</code> 是一个量词, 常用来一个或一组字符可以重复出现的次数.<br>例如,  表达式 <code>[0-9]{2,3}</code> 匹配最少 2 位最多 3 位 0~9 的数字.</p>
<pre>
"[0-9]{2,3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.
</pre>

<p><a href="https://regex101.com/r/juM86s/1" target="_blank" rel="noopener">在线练习</a></p>
<p>我们可以省略第二个参数.<br>例如, <code>[0-9]{2,}</code> 匹配至少两位 0~9 的数字.</p>
<p>如果逗号也省略掉则表示重复固定的次数.<br>例如, <code>[0-9]{3}</code> 匹配3位数字</p>
<pre>
"[0-9]{2,}" => The number was 9.<a href="#learn-regex"><strong>9997</strong></a> but we rounded it off to <a href="#learn-regex"><strong>10</strong></a>.0.
</pre>

<p><a href="https://regex101.com/r/Gdy4w5/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"[0-9]{3}" => The number was 9.<a href="#learn-regex"><strong>999</strong></a>7 but we rounded it off to 10.0.
</pre>

<p><a href="https://regex101.com/r/Sivu30/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-5-特征标群"><a href="#2-5-特征标群" class="headerlink" title="2.5 (...) 特征标群"></a>2.5 <code>(...)</code> 特征标群</h2><p>特征标群是一组写在 <code>(...)</code> 中的子模式. 例如之前说的 <code>{}</code> 是用来表示前面一个字符出现指定次数. 但如果在 <code>{}</code> 前加入特征标群则表示整个标群内的字符重复 N 次. 例如, 表达式 <code>(ab)*</code> 匹配连续出现 0 或更多个 <code>ab</code>.</p>
<p>我们还可以在 <code>()</code> 中用或字符 <code>|</code> 表示或. 例如, <code>(c|g|p)ar</code> 匹配 <code>car</code> 或 <code>gar</code> 或 <code>par</code>.</p>
<pre>
"(c|g|p)ar" => The <a href="#learn-regex"><strong>car</strong></a> is <a href="#learn-regex"><strong>par</strong></a>ked in the <a href="#learn-regex"><strong>gar</strong></a>age.
</pre>

<p><a href="https://regex101.com/r/tUxrBG/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-6-或运算符"><a href="#2-6-或运算符" class="headerlink" title="2.6 | 或运算符"></a>2.6 <code>|</code> 或运算符</h2><p>或运算符就表示或, 用作判断条件.</p>
<p>例如 <code>(T|t)he|car</code> 匹配 <code>(T|t)he</code> 或 <code>car</code>.</p>
<pre>
"(T|t)he|car" => <a href="#learn-regex"><strong>The</strong></a> <a href="#learn-regex"><strong>car</strong></a> is parked in <a href="#learn-regex"><strong>the</strong></a> garage.
</pre>

<p><a href="https://regex101.com/r/fBXyX0/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-7-转码特殊字符"><a href="#2-7-转码特殊字符" class="headerlink" title="2.7 转码特殊字符"></a>2.7 转码特殊字符</h2><p>反斜线 <code>\</code> 在表达式中用于转码紧跟其后的字符. 用于指定 <code>{ } [ ] / \ + * . $ ^ | ?</code> 这些特殊字符. 如果想要匹配这些特殊字符则要在其前面加上反斜线 <code>\</code>.</p>
<p>例如 <code>.</code> 是用来匹配除换行符外的所有字符的. 如果想要匹配句子中的 <code>.</code> 则要写成 <code>\.</code> 以下这个例子 <code>\.?</code>是选择性匹配<code>.</code></p>
<pre>
"(f|c|m)at\.?" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> sat on the <a href="#learn-regex"><strong>mat.</strong></a>
</pre>

<p><a href="https://regex101.com/r/DOc5Nu/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="2-8-锚点"><a href="#2-8-锚点" class="headerlink" title="2.8 锚点"></a>2.8 锚点</h2><p>在正则表达式中, 想要匹配指定开头或结尾的字符串就要使用到锚点. <code>^</code> 指定开头, <code>$</code> 指定结尾.</p>
<h3 id="2-8-1-号"><a href="#2-8-1-号" class="headerlink" title="2.8.1 ^ 号"></a>2.8.1 <code>^</code> 号</h3><p><code>^</code> 用来检查匹配的字符串是否在所匹配字符串的开头.</p>
<p>例如, 在 <code>abc</code> 中使用表达式 <code>^a</code> 会得到结果 <code>a</code>. 但如果使用 <code>^b</code> 将匹配不到任何结果. 因为在字符串 <code>abc</code> 中并不是以 <code>b</code> 开头.</p>
<p>例如, <code>^(T|t)he</code> 匹配以 <code>The</code> 或 <code>the</code> 开头的字符串.</p>
<pre>
"(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in <a href="#learn-regex"><strong>the</strong></a> garage.
</pre>

<p><a href="https://regex101.com/r/5ljjgB/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"^(T|t)he" => <a href="#learn-regex"><strong>The</strong></a> car is parked in the garage.
</pre>

<p><a href="https://regex101.com/r/jXrKne/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="2-8-2-号"><a href="#2-8-2-号" class="headerlink" title="2.8.2 $ 号"></a>2.8.2 <code>$</code> 号</h3><p>同理于 <code>^</code> 号, <code>$</code> 号用来匹配字符是否是最后一个.</p>
<p>例如, <code>(at\.)$</code> 匹配以 <code>at.</code> 结尾的字符串.</p>
<pre>
"(at\.)" => The fat c<a href="#learn-regex"><strong>at.</strong></a> s<a href="#learn-regex"><strong>at.</strong></a> on the m<a href="#learn-regex"><strong>at.</strong></a>
</pre>

<p><a href="https://regex101.com/r/y4Au4D/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"(at\.)$" => The fat cat. sat. on the m<a href="#learn-regex"><strong>at.</strong></a>
</pre>

<p><a href="https://regex101.com/r/t0AkOd/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="3-简写字符集"><a href="#3-简写字符集" class="headerlink" title="3. 简写字符集"></a>3. 简写字符集</h2><p>正则表达式提供一些常用的字符集简写. 如下:</p>
<table>
<thead>
<tr>
<th align="center">简写</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td>除换行符外的所有字符</td>
</tr>
<tr>
<td align="center">\w</td>
<td>匹配所有字母数字, 等同于 <code>[a-zA-Z0-9_]</code></td>
</tr>
<tr>
<td align="center">\W</td>
<td>匹配所有非字母数字, 即符号, 等同于: <code>[^\w]</code></td>
</tr>
<tr>
<td align="center">\d</td>
<td>匹配数字: <code>[0-9]</code></td>
</tr>
<tr>
<td align="center">\D</td>
<td>匹配非数字: <code>[^\d]</code></td>
</tr>
<tr>
<td align="center">\s</td>
<td>匹配所有空格字符, 等同于: <code>[\t\n\f\r\p{Z}]</code></td>
</tr>
<tr>
<td align="center">\S</td>
<td>匹配所有非空格字符: <code>[^\s]</code></td>
</tr>
<tr>
<td align="center">\f</td>
<td>匹配一个换页符</td>
</tr>
<tr>
<td align="center">\n</td>
<td>匹配一个换行符</td>
</tr>
<tr>
<td align="center">\r</td>
<td>匹配一个回车符</td>
</tr>
<tr>
<td align="center">\t</td>
<td>匹配一个制表符</td>
</tr>
<tr>
<td align="center">\v</td>
<td>匹配一个垂直制表符</td>
</tr>
<tr>
<td align="center">\p</td>
<td>匹配 CR/LF (等同于 <code>\r\n</code>)，用来匹配 DOS 行终止符</td>
</tr>
</tbody></table>
<h2 id="4-前后关联约束-前后预查"><a href="#4-前后关联约束-前后预查" class="headerlink" title="4. 前后关联约束(前后预查)"></a>4. 前后关联约束(前后预查)</h2><p>前置约束和后置约束都属于<strong>非捕获簇</strong>(用于匹配不在匹配列表中的格式).<br>前置约束用于判断所匹配的格式是否在另一个确定的格式之后.</p>
<p>例如, 我们想要获得所有跟在 <code>$</code> 符号后的数字, 我们可以使用正向向后约束 <code>(?&lt;=\$)[0-9\.]*</code>.<br>这个表达式匹配 <code>$</code> 开头, 之后跟着 <code>0,1,2,3,4,5,6,7,8,9,.</code> 这些字符可以出现大于等于 0 次.</p>
<p>前后关联约束如下:</p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">?=</td>
<td>前置约束-存在</td>
</tr>
<tr>
<td align="center">?!</td>
<td>前置约束-排除</td>
</tr>
<tr>
<td align="center">?&lt;=</td>
<td>后置约束-存在</td>
</tr>
<tr>
<td align="center">?&lt;!</td>
<td>后置约束-排除</td>
</tr>
</tbody></table>
<h3 id="4-1-前置约束-存在"><a href="#4-1-前置约束-存在" class="headerlink" title="4.1 ?=... 前置约束(存在)"></a>4.1 <code>?=...</code> 前置约束(存在)</h3><p><code>?=...</code> 前置约束(存在), 表示第一部分表达式必须跟在 <code>?=...</code>定义的表达式之后.</p>
<p>返回结果只满足第一部分表达式.<br>定义一个前置约束(存在)要使用 <code>()</code>. 在括号内部使用一个问号和等号: <code>(?=...)</code>. </p>
<p>前置约束的内容写在括号中的等号后面.<br>例如, 表达式 <code>(T|t)he(?=\sfat)</code> 匹配 <code>The</code> 和 <code>the</code>, 在括号中我们又定义了前置约束(存在) <code>(?=\sfat)</code> ,即 <code>The</code> 和 <code>the</code> 后面紧跟着 <code>(空格)fat</code>.</p>
<pre>
"(T|t)he(?=\sfat)" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.
</pre>

<p><a href="https://regex101.com/r/IDDARt/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="4-2-前置约束-排除"><a href="#4-2-前置约束-排除" class="headerlink" title="4.2 ?!... 前置约束-排除"></a>4.2 <code>?!...</code> 前置约束-排除</h3><p>前置约束-排除 <code>?!</code> 用于筛选所有匹配结果, 筛选条件为 其后不跟随着定义的格式<br><code>前置约束-排除</code>  定义和 <code>前置约束(存在)</code> 一样, 区别就是 <code>=</code> 替换成 <code>!</code> 也就是 <code>(?!...)</code>.</p>
<p>表达式 <code>(T|t)he(?!\sfat)</code> 匹配 <code>The</code> 和 <code>the</code>, 且其后不跟着 <code>(空格)fat</code>.</p>
<pre>
"(T|t)he(?!\sfat)" => The fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.
</pre>

<p><a href="https://regex101.com/r/V32Npg/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="4-3-lt-后置约束-存在"><a href="#4-3-lt-后置约束-存在" class="headerlink" title="4.3 ?&lt;= ... 后置约束-存在"></a>4.3 <code>?&lt;= ...</code> 后置约束-存在</h3><p>后置约束-存在 记作<code>(?&lt;=...)</code> 用于筛选所有匹配结果, 筛选条件为 其前跟随着定义的格式.<br>例如, 表达式 <code>(?&lt;=(T|t)he\s)(fat|mat)</code> 匹配 <code>fat</code> 和 <code>mat</code>, 且其前跟着 <code>The</code> 或 <code>the</code>.</p>
<pre>
"(?<=(t|t)he\s)(fat|mat)" => The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the <a href="#learn-regex"><strong>mat</strong></a>.
</=(t|t)he\s)(fat|mat)"></pre>

<p><a href="https://regex101.com/r/avH165/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="4-4-lt-后置约束-排除"><a href="#4-4-lt-后置约束-排除" class="headerlink" title="4.4 ?&lt;!... 后置约束-排除"></a>4.4 <code>?&lt;!...</code> 后置约束-排除</h3><p>后置约束-排除 记作 <code>(?&lt;!...)</code> 用于筛选所有匹配结果, 筛选条件为 其前不跟着定义的格式.<br>例如, 表达式 <code>(?&lt;!(T|t)he\s)(cat)</code> 匹配 <code>cat</code>, 且其前不跟着 <code>The</code> 或 <code>the</code>.</p>
<pre>
"(?&lt;!(T|t)he\s)(cat)" => The cat sat on <a href="#learn-regex"><strong>cat</strong></a>.
</pre>

<p><a href="https://regex101.com/r/8Efx5G/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="5-标志"><a href="#5-标志" class="headerlink" title="5. 标志"></a>5. 标志</h2><p>标志也叫修饰语, 因为它可以用来修改表达式的搜索结果.<br>这些标志可以任意的组合使用, 它也是整个正则表达式的一部分.</p>
<table>
<thead>
<tr>
<th align="center">标志</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">i</td>
<td>忽略大小写.</td>
</tr>
<tr>
<td align="center">g</td>
<td>全局搜索.</td>
</tr>
<tr>
<td align="center">m</td>
<td>多行的: 锚点元字符 <code>^</code> <code>$</code> 工作范围在每行的起始.</td>
</tr>
</tbody></table>
<h3 id="5-1-忽略大小写-Case-Insensitive"><a href="#5-1-忽略大小写-Case-Insensitive" class="headerlink" title="5.1 忽略大小写 (Case Insensitive)"></a>5.1 忽略大小写 (Case Insensitive)</h3><p>修饰语 <code>i</code> 用于忽略大小写.<br>例如, 表达式 <code>/The/gi</code> 表示在全局搜索 <code>The</code>, 在后面的 <code>i</code> 将其条件修改为忽略大小写, 则变成搜索 <code>the</code> 和 <code>The</code>, <code>g</code> 表示全局搜索.</p>
<pre>
"The" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on the mat.
</pre>

<p><a href="https://regex101.com/r/dpQyf9/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"/The/gi" => <a href="#learn-regex"><strong>The</strong></a> fat cat sat on <a href="#learn-regex"><strong>the</strong></a> mat.
</pre>

<p><a href="https://regex101.com/r/ahfiuh/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="5-2-全局搜索-Global-search"><a href="#5-2-全局搜索-Global-search" class="headerlink" title="5.2 全局搜索 (Global search)"></a>5.2 全局搜索 (Global search)</h3><p>修饰符 <code>g</code> 常用语执行一个全局搜索匹配, 即(不仅仅返回第一个匹配的, 而是返回全部).<br>例如, 表达式 <code>/.(at)/g</code> 表示搜索 任意字符(除了换行) + <code>at</code>, 并返回全部结果.</p>
<pre>
"/.(at)/" => The <a href="#learn-regex"><strong>fat</strong></a> cat sat on the mat.
</pre>

<p><a href="https://regex101.com/r/jnk6gM/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"/.(at)/g" => The <a href="#learn-regex"><strong>fat</strong></a> <a href="#learn-regex"><strong>cat</strong></a> <a href="#learn-regex"><strong>sat</strong></a> on the <a href="#learn-regex"><strong>mat</strong></a>.
</pre>

<p><a href="https://regex101.com/r/dO1nef/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="5-3-多行修饰符-Multiline"><a href="#5-3-多行修饰符-Multiline" class="headerlink" title="5.3 多行修饰符 (Multiline)"></a>5.3 多行修饰符 (Multiline)</h3><p>多行修饰符 <code>m</code> 常用语执行一个多行匹配.</p>
<p>像之前介绍的 <code>(^,$)</code> 用于检查格式是否是在待检测字符串的开头或结尾. 但我们如果想要它在每行的开头和结尾生效, 我们需要用到多行修饰符 <code>m</code>.</p>
<p>例如, 表达式 <code>/at(.)?$/gm</code> 表示小写字符 <code>a</code> 后跟小写字符 <code>t</code> , 末尾可选除换行符外任意字符. 根据 <code>m</code> 修饰符, 现在表达式匹配每行的结尾.</p>
<pre>
"/.at(.)?$/" => The fat
                cat sat
                on the <a href="#learn-regex"><strong>mat.</strong></a>
</pre>

<p><a href="https://regex101.com/r/hoGMkP/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"/.at(.)?$/gm" => The <a href="#learn-regex"><strong>fat</strong></a>
                  cat <a href="#learn-regex"><strong>sat</strong></a>
                  on the <a href="#learn-regex"><strong>mat.</strong></a>
</pre>

<p><a href="https://regex101.com/r/E88WE2/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="6-贪婪匹配与惰性匹配-Greedy-vs-lazy-matching"><a href="#6-贪婪匹配与惰性匹配-Greedy-vs-lazy-matching" class="headerlink" title="6. 贪婪匹配与惰性匹配 (Greedy vs lazy matching)"></a>6. 贪婪匹配与惰性匹配 (Greedy vs lazy matching)</h3><p>正则表达式默认采用贪婪匹配模式，在该模式下意味着会匹配尽可能长的子串。我们可以使用 <code>?</code> 将贪婪匹配模式转化为惰性匹配模式。</p>
<pre>
"/(.*at)/" => <a href="#learn-regex"><strong>The fat cat sat on the mat</strong></a>. </pre>

<p><a href="https://regex101.com/r/AyAdgJ/1" target="_blank" rel="noopener">在线练习</a></p>
<pre>
"/(.*?at)/" => <a href="#learn-regex"><strong>The fat</strong></a> cat sat on the mat. </pre>


<p><a href="https://regex101.com/r/AyAdgJ/2" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="贡献"><a href="#贡献" class="headerlink" title="贡献"></a>贡献</h2><ul>
<li>报告问题</li>
<li>开放合并请求</li>
<li>传播此文档</li>
<li>直接和我联系 <a href="mailto:ziishaned@gmail.com" target="_blank" rel="noopener">ziishaned@gmail.com</a> 或 <a href="https://twitter.com/ziishaned" target="_blank" rel="noopener"><img src="https://img.shields.io/twitter/url/https/twitter.com/ziishaned.svg?style=social&label=Follow%20%40ziishaned" alt="Twitter URL"></a></li>
</ul>
<h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><p>MIT © <a href="mailto:ziishaned@gmail.com" target="_blank" rel="noopener">Zeeshan Ahmed</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/29/后端/java/模拟Ping获取IP响应时间/index.html">模拟Ping</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-29</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工具函数/index.html">工具函数</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/java/index.html">java</a></span><div class="content"><pre><code class="java">import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Collections;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.stream.Collectors;

public class IpContimeUtil {

    private static float ping(String ipAddress) {

        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().contains(&quot;win&quot;);
        String command = String.format(&quot;ping -%s 1 %s&quot;, isWindows ? &quot;n&quot; : &quot;c&quot;, ipAddress);
        try {
            Process process = Runtime.getRuntime().exec(command);
            InputStream inputStream = process.getInputStream();
            InputStreamReader inputStreamReader = new InputStreamReader(inputStream, &quot;GBK&quot;);
            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
            String line;
            Pattern pattern = Pattern.compile(&quot;.*?([\\d.]+)\\s?ms.*&quot;);

            while ((line = bufferedReader.readLine()) != null) {
                System.out.println(line);
                Matcher matcher = pattern.matcher(line);
                if (matcher.matches()) {
                    return Float.parseFloat(matcher.group(1));
                }
            }
        } catch (IOException e) {
            throw new RuntimeException(&quot;响应超时&quot;);
        }
        throw new RuntimeException(&quot;响应异常&quot;);
    }

    private static List&lt;Float&gt; print(List&lt;String&gt; newList) throws Exception {
        return newList.stream().map(IpContimeUtil::ping).collect(Collectors.toList());
    }

    public static void main(String[] args) throws Exception {
        System.out.println(&quot;响应时间：&quot; + IpContimeUtil.print(Collections.singletonList(&quot;101.132.162.159&quot;)));
    }
}
</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/29/后端/java/钩子函数/index.html">钩子函数</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-29</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java成神之路/index.html">Java成神之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/java/index.html">java</a></span><div class="content"><h1 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h1><blockquote>
<p>钩子(hook)，是一种具有 <code>既定生命周期</code> 的框架工具，在生命周期的各个阶段预留给用户执行一些特定操作的口子，其实是一种 <code>面向切面</code> 编程。</p>
<p>例如当 JVM 程序即将退出时，会执行我们注入的 钩子线程。</p>
<pre><code class="java"> public static void main(String[] args) {
     Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
         @Override
         public void run() {
             System.out.println(&quot;The hook thread 1 is running.&quot;);
             try {
                 TimeUnit.SECONDS.sleep(2);
             } catch (InterruptedException e) {
                 e.printStackTrace();
             }
             System.out.println(&quot;The hook thread 1 is exit.&quot;);
         }
     }));

     Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
         @Override
         public void run() {
             System.out.println(&quot;The hook thread 2 is running.&quot;);
             try {
                 TimeUnit.SECONDS.sleep(2);
             } catch (InterruptedException e) {
                 e.printStackTrace();
             }
             System.out.println(&quot;The hook thread 2 is exit.&quot;);
         }
     }));
 }</code></pre>
<p>当该方法运行结束时，会调用这两个 hook 线程。</p>
<h2 id="应用场景：防止应用程序重复启动"><a href="#应用场景：防止应用程序重复启动" class="headerlink" title="应用场景：防止应用程序重复启动"></a>应用场景：防止应用程序重复启动</h2><pre><code class="java">public static void main(String[] args) {
    File file = new File(&quot;./.lock&quot;);
    if(file.exists()){
        throw new RuntimeException(&quot;The program already running.&quot;);
    }
    try {
        file.createNewFile();
    } catch (IOException e) {
        e.printStackTrace();
    }

    Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
        @Override
        public void run() {
            System.out.println(&quot;The program received kill signal.&quot;);
            file.delete();
        }
    }));

    while(true){
        try {
            TimeUnit.SECONDS.sleep(1);
            System.out.println(&quot;The program is running.&quot;);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}</code></pre>
</blockquote>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/28/Git/3.Git命令/index.html">Git常见命令</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-28</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Git命令学习/index.html">Git命令学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Git/index.html">Git</a></span><div class="content"><h2 id="1-初始化仓库"><a href="#1-初始化仓库" class="headerlink" title="1. 初始化仓库"></a>1. 初始化仓库</h2><pre><code>git init</code></pre><h2 id="2-添加文件至仓库"><a href="#2-添加文件至仓库" class="headerlink" title="2. 添加文件至仓库"></a>2. 添加文件至仓库</h2><pre><code>git add .   // 点表示所有，也可以将点换成指定的文件名</code></pre><h2 id="3-本地仓库关联远程仓库"><a href="#3-本地仓库关联远程仓库" class="headerlink" title="3. 本地仓库关联远程仓库"></a>3. 本地仓库关联远程仓库</h2><pre><code>git remote add origin gitee.com/luo-qiang/koral.git</code></pre><h2 id="4-推送到远程"><a href="#4-推送到远程" class="headerlink" title="4. 推送到远程"></a>4. 推送到远程</h2><pre><code>git push -u origin master</code></pre><h2 id="5-切换分支"><a href="#5-切换分支" class="headerlink" title="5. 切换分支"></a>5. 切换分支</h2><pre><code>git checkout origin/develop</code></pre><h1 id="Git-常用命令速查表"><a href="#Git-常用命令速查表" class="headerlink" title="Git 常用命令速查表"></a>Git 常用命令速查表</h1><blockquote>
<p>分支</p>
</blockquote>
<pre><code>  master                    # 默认开发分支
  origin                    # 默认远程版本库
  Head                      # 默认开发分支
  Head^                     # Head 的父提交</code></pre><blockquote>
<p>创建版本库</p>
</blockquote>
<pre><code>  git clone &lt;URL&gt;           # 克隆远程版本库
  git init                  # 初始化本地版本库</code></pre><blockquote>
<p>修改和提交</p>
</blockquote>
<pre><code>  git status                # 查看状态
  git diff                  # 查看变更内容
  git add .                 # 跟踪所有改动过的文件
  git add &lt;file&gt;            # 跟踪指定的文件
  git mv &lt;old&gt; &lt;new&gt;        # 文件改名
  git rm &lt;file&gt;             # 删除文件
  git rm --cached &lt;file&gt;    # 停止跟踪文件但不删除
  git commit -m &quot;commit message&quot;    #提交所有更新过的文件到本地仓库
  git commit --amend        # 修改最后一次提交</code></pre><blockquote>
<p>查看提交历史</p>
</blockquote>
<pre><code>  git log                   # 查看提交历史
  git log -p &lt;file&gt;         # 查看指定文件的提交历史
  git blame &lt;file&gt;          # 以列表方式查看指定文件的提交历史</code></pre><blockquote>
<p>撤销</p>
</blockquote>
<pre><code>  git reset --hard HEAD     # 撤销工作目录中所有未提交文件的修改内容
  git checkout HEAD &lt;file&gt;  # 撤销指定的未提交文件的修改内容
  git revert &lt;commit&gt;       # 撤销指定的提交</code></pre><blockquote>
<p>分支与标签</p>
</blockquote>
<pre><code>  git branch                # 显示所有本地分支
  git checkout &lt;branch/tag&gt; # 切换到指定分支或标签
  git branch &lt;new-branch&gt;   # 创建新分支
  git branch -d &lt;branch&gt;    # 删除本地分支
  git tag                   # 列出所有本地标签
  git tag &lt;tagname&gt;         # 基于最新提交创建标签
  git tag -d &lt;tagname&gt;      # 删除标签</code></pre><blockquote>
<p>合并与衍合(即变基合并)</p>
</blockquote>
<pre><code>  git merge &lt;branch&gt;        # 合并指定分支到当前分支
  git rebase &lt;branch&gt;       # 衍合指定分支到当前分支</code></pre><blockquote>
<p>远程操作</p>
</blockquote>
<pre><code>  git remote -v             # 查看远程版本库信息
  git remote show &lt;remote&gt;  # 查看指定远程版本库信息
  git remote add &lt;remote&gt; &lt;url&gt; # 添加远程版本库
  git fetch &lt;remote&gt;        # 从远程库获取代码
  git pull &lt;remote&gt; &lt;branch&gt; # 下载代码及快速合并
  git push &lt;remote&gt; &lt;branch&gt; # 下载代码及快速合并
  git push &lt;remote&gt; :&lt;branch/tag-name&gt; # 删除远程分支或便签
  git push --tags           # 上传所有标签</code></pre><blockquote>
<p>暂存切换分支</p>
</blockquote>
<table>
<thead>
<tr>
<th>–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>git stash save -a “message”  会将ignore 的文件也进行暂存，当进行pop该 stash 时，会出现</p>
<pre><code class="shell">Could not restore untracked files from stash</code></pre>
<p>git stash save -u “message” 不会将ignore 的文件进行暂存</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/28/Git/2.分支管理策略/index.html">Git分支管理策略</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-28</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Git命令学习/index.html">Git命令学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Git/index.html">Git</a></span><div class="content"><h1 id="一、使用分支管理的原因"><a href="#一、使用分支管理的原因" class="headerlink" title="一、使用分支管理的原因"></a>一、使用分支管理的原因</h1><h2 id="为了使版本库的演进保持简洁，各分支井井有条"><a href="#为了使版本库的演进保持简洁，各分支井井有条" class="headerlink" title="为了使版本库的演进保持简洁，各分支井井有条"></a>为了使版本库的演进保持简洁，各分支井井有条</h2><h1 id="二、主分支-Master"><a href="#二、主分支-Master" class="headerlink" title="二、主分支 Master"></a>二、主分支 Master</h1><p>提供给用户使用的正式版本，都在该分支上发布，也是 Git 的默认分支</p>
<h1 id="三、开发分支-Develop"><a href="#三、开发分支-Develop" class="headerlink" title="三、开发分支 Develop"></a>三、开发分支 Develop</h1><p>日常开发使用，在开发完成之后，用于合并到 Master 分支上的。</p>
<h1 id="四、临时性分支"><a href="#四、临时性分支" class="headerlink" title="四、临时性分支"></a>四、临时性分支</h1><h2 id="1-feature-分支"><a href="#1-feature-分支" class="headerlink" title="1. feature 分支"></a>1. feature 分支</h2><pre><code>功能分支，开发一个新的功能，需要放在feature分支之上，完成功能开发之后，要将该分支合并到 Develop 分支上</code></pre><h2 id="2-release-分支"><a href="#2-release-分支" class="headerlink" title="2. release 分支"></a>2. release 分支</h2><pre><code>预发布分支，是从 Develop 分支上分离出来的，指发布正式版本之前，可能需要预发布分支进行测试</code></pre><h2 id="3-fixbug-分支"><a href="#3-fixbug-分支" class="headerlink" title="3. fixbug 分支"></a>3. fixbug 分支</h2><pre><code>修补BUG分支，是由 Master 分支分离出来的，当Bug修复完毕之后，再合并进 Develop 和 Master 分支</code></pre><h2 id="4-hotfix-分支"><a href="#4-hotfix-分支" class="headerlink" title="4. hotfix 分支"></a>4. hotfix 分支</h2><pre><code>热修分支，用户产品发布后修复 BUG</code></pre><h2 id="5-custom-分支"><a href="#5-custom-分支" class="headerlink" title="5. custom 分支"></a>5. custom 分支</h2><pre><code>自定义分支，根据自定义的需要创建的分支类型</code></pre><h1 id="五、提交命名规范"><a href="#五、提交命名规范" class="headerlink" title="五、提交命名规范"></a>五、提交命名规范</h1><h2 id="常见的操作类型有："><a href="#常见的操作类型有：" class="headerlink" title="常见的操作类型有："></a>常见的操作类型有：</h2><pre><code>1. [IMP]提升改善正在开发或者已经实现的功能
2. [FIX]修正BUG
3. [REF]重构一个功能，对功能进行重写
4. [ADD]添加实现新功能
5. [REM]删除不需要的文件</code></pre><p><a href="mailto:413026b2687.cdb@sina.cn" target="_blank" rel="noopener">413026b2687.cdb@sina.cn</a>  2st21udn</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/28/Git/1.多个Git源/index.html">Git多账户配置</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-28</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Git命令学习/index.html">Git命令学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Git/index.html">Git</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Git-Bash/index.html">Git Bash</a></span><div class="content"><h1 id="同时使用多个Git源（Github-Gitee-Gitlab等）"><a href="#同时使用多个Git源（Github-Gitee-Gitlab等）" class="headerlink" title="同时使用多个Git源（Github,Gitee,Gitlab等）"></a>同时使用多个Git源（Github,Gitee,Gitlab等）</h1><p>在很多情况下，我们在同一台PC上可能需要关联多个 <code>Git 源</code>。比如公司的项目放在 <code>gitee</code> 上，但是个人有很多学习的小项目都放在 <code>github</code> 上，此时就需要有能连接多个 <code>ssh</code> 的需求。</p>
<h2 id="第一步：为每个-git-在线服务生成一对公私钥"><a href="#第一步：为每个-git-在线服务生成一对公私钥" class="headerlink" title="第一步：为每个 git 在线服务生成一对公私钥"></a>第一步：为每个 git 在线服务生成一对公私钥</h2><pre><code class="node">$ ssh-keygen -t rsa -C &quot;yourEmail@email.com&quot;

Enter file in which to save the key (/c/Users/user/.ssh/id_rsa): /c/User/user/.ssh/id_rsa_github</code></pre>
<p>我们以 id_rsa_github 为生成的公私钥文件命名，并指定文件的存储路径为 “/c/User/user/.ssh/“ 下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13603359-accb6aef01836f8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生成的公私钥"></p>
<p>如果你需要多个服务，则依次 <code>重复第一步</code> 即可。<br><code>注意每一对公私钥的命名不能重复。</code></p>
<h2 id="第二步：在-c-User-user-ssh-下创建-config-文件，并填入刚刚的公私钥名"><a href="#第二步：在-c-User-user-ssh-下创建-config-文件，并填入刚刚的公私钥名" class="headerlink" title="第二步：在 /c/User/user/.ssh/ 下创建 config 文件，并填入刚刚的公私钥名"></a>第二步：在 /c/User/user/.ssh/ 下创建 config 文件，并填入刚刚的公私钥名</h2><pre><code class="groovy">Host gitee.com
  Hostname gitee.com
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa_gitee
  User koral

Host github.com
  Hostname github.com
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa_github
  User koral</code></pre>
<p>这一步表示，在git发起 ssh 链接时，对应着哪一个 ssh 私钥。这里我只以 码云( <code>gitee@OSC</code> )和 <code>github</code> 为例。</p>
<p>不要问我 <code>~/.ssh/</code> 前面的 <code>~</code> 表示什么意思。我也不会告诉你，它表示当前PC用户的根目录的。至于你想设置为全局的，我也不知道。</p>
<h2 id="第三步：将生成的公钥添加至各自的-SSH-中"><a href="#第三步：将生成的公钥添加至各自的-SSH-中" class="headerlink" title="第三步：将生成的公钥添加至各自的 SSH 中"></a>第三步：将生成的公钥添加至各自的 SSH 中</h2><p>这里以 Github 为例，其他几个网站类似：</p>
<h3 id="在-SSH-keys-中”New-SSH-key”"><a href="#在-SSH-keys-中”New-SSH-key”" class="headerlink" title="在 SSH keys 中”New SSH key”"></a>在 SSH keys 中”New SSH key”</h3><p><img src="https://upload-images.jianshu.io/upload_images/13603359-c8f3bdda9deef6da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="找到github的ssh"></p>
<h3 id="写入生成的SSH"><a href="#写入生成的SSH" class="headerlink" title="写入生成的SSH"></a>写入生成的SSH</h3><p>找到第一步中生成的SSH公钥(以”.pub”结尾的)，并填入，Title随便写<br><img src="https://upload-images.jianshu.io/upload_images/13603359-1381194685beccaa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="第四步：测试"><a href="#第四步：测试" class="headerlink" title="第四步：测试"></a>第四步：测试</h2><pre><code class="shell">ssh -T git@github.com
ssh -T git@gitee.com</code></pre>
<p>如果提示了什么不得了的东西，请先删除 “/c/User/user/.ssh/“ 目录下的 “known_hosts”，并重新执行测试。它会重新生成一个。<br>当出现 <code>Hi koral! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code> 时，恭喜你，连接成功。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/08/运维/Linux/1.Ubuntu安全基线检查/index.html">Ubuntu安全基线检查</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Linux学习之路/index.html">Linux学习之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Linux/index.html">Linux</a></span><div class="content"><h1 id="Ubuntu安全基线检查"><a href="#Ubuntu安全基线检查" class="headerlink" title="Ubuntu安全基线检查"></a>Ubuntu安全基线检查</h1><p>来自于阿里云云安全中心于 2019/07/22 发送的一条安全漏洞检查，其中关于账户、文件等方面的安全检查及修改建议。</p>
<h2 id="一、设置密码失效时间"><a href="#一、设置密码失效时间" class="headerlink" title="一、设置密码失效时间"></a>一、设置密码失效时间</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>设置密码失效时间，强制定期修改密码，减少密码被泄露和猜测风险，使用非密码登录(如密钥对)方式可以忽略。</p>
<h3 id="加固建议"><a href="#加固建议" class="headerlink" title="加固建议"></a>加固建议</h3><p>在 /etc/login.defs 中将 PASS_MAX_DAYS 参数设置为 60-180 之间，如：</p>
<pre><code class="shell">PASS_MAX_DAYS 90</code></pre>
<p>需同时执行命令设置 root 密码失效时间：</p>
<pre><code class="shell">chage --maxdays 90 root</code></pre>
<h2 id="二、设置密码修改最小间隔时间"><a href="#二、设置密码修改最小间隔时间" class="headerlink" title="二、设置密码修改最小间隔时间"></a>二、设置密码修改最小间隔时间</h2><h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>设置密码修改最小间隔时间，限制密码更改过于频繁</p>
<h3 id="加固建议-1"><a href="#加固建议-1" class="headerlink" title="加固建议"></a>加固建议</h3><p>在 /etc/login.defs 中将 PASS_MIN_DAYS 参数设置为 7-14 之间，建议为7：</p>
<pre><code class="shell">PASS_MIN_DAYS 7</code></pre>
<p>需同时执行命令为 root 用户设置：</p>
<pre><code class="shell">chage --mindays 7 root</code></pre>
<h2 id="三、密码复杂度检查"><a href="#三、密码复杂度检查" class="headerlink" title="三、密码复杂度检查"></a>三、密码复杂度检查</h2><h3 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h3><p>检查密码长度和密码是否使用多种字符类型</p>
<h3 id="加固建议-2"><a href="#加固建议-2" class="headerlink" title="加固建议"></a>加固建议</h3><ol>
<li><p>安装 PAM 的 cracklib 模块，执行命令：</p>
<ol>
<li><blockquote>
<p>apt-get update &amp;&amp; apt-get install libpam-cracklib</p>
</blockquote>
</li>
</ol>
</li>
<li><p>编辑 <code>/etc/pam.d/common-password</code>，在 password requisite pam_cracklib.so 开头的这一行配置 minclass(至少包含小写字母、大写字母、数字、特殊字符等4类字符中的3类或4类) 设置为3或4，即在行末尾加上参数 minclass=3；在 password[success=1 default=ignore] pam_unix.so 开头的这一行增加配置 minlen（密码最小长度）设置为9-32位，建议为9,即在行末尾加上参数 minlen=9</p>
</li>
</ol>
<h2 id="四、检查密码重用是否受限制"><a href="#四、检查密码重用是否受限制" class="headerlink" title="四、检查密码重用是否受限制"></a>四、检查密码重用是否受限制</h2><h3 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h3><p>强制用户不重用最新使用的密码，降低密码猜测攻击风险</p>
<h3 id="加固建议-3"><a href="#加固建议-3" class="headerlink" title="加固建议"></a>加固建议</h3><p>编辑 <code>/etc/pam.d/common-password</code>，在 <code>password [success=1 default=ignore] pam_unix.so</code> 开头的这一行增加配置 remember 设置为 5-24 之间，如在行末尾加上 remember=5</p>
<h2 id="五、设置用户权限配置文件的权限"><a href="#五、设置用户权限配置文件的权限" class="headerlink" title="五、设置用户权限配置文件的权限"></a>五、设置用户权限配置文件的权限</h2><h3 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h3><p>设置用户权限配置文件的权限</p>
<h3 id="加固建议-4"><a href="#加固建议-4" class="headerlink" title="加固建议"></a>加固建议</h3><p>执行如下5条命令</p>
<pre><code class="shell">chown root:root /etc/passwd /etc/shadow /etc/group /etc/gshadow
chmod 0644 /etc/group
chmod 0644 /etc/passwd
chmod 0400 /etc/shadow
chmod 0400 /etc/gshadow</code></pre>
<h2 id="六、设置SSH空闲超时退出时间"><a href="#六、设置SSH空闲超时退出时间" class="headerlink" title="六、设置SSH空闲超时退出时间"></a>六、设置SSH空闲超时退出时间</h2><h3 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h3><p>设置SSH空闲超时退出时间，可降低未授权用户访问其他用户 ssh 会话的风险</p>
<h3 id="加固建议-5"><a href="#加固建议-5" class="headerlink" title="加固建议"></a>加固建议</h3><p>编辑 <code>/etc/ssh/sshd_config</code>，将 ClientAliveInterval 设置为300到900，即5-15分钟，将ClientAliveCountMax 设置为0-3之间。</p>
<pre><code class="shell">ClientAliveInterval 600
ClientAliveCountMax 2</code></pre>
<h3 id="七、检查系统空密码账户"><a href="#七、检查系统空密码账户" class="headerlink" title="七、检查系统空密码账户"></a>七、检查系统空密码账户</h3><h3 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h3><p>检查系统空密码账户</p>
<h3 id="加固建议-6"><a href="#加固建议-6" class="headerlink" title="加固建议"></a>加固建议</h3><p>为用户设置一个非空密码，或者执行 <code>passwd -l &lt;username&gt;</code> 锁定用户</p>
<h2 id="八、禁止SSH空密码用户登录"><a href="#八、禁止SSH空密码用户登录" class="headerlink" title="八、禁止SSH空密码用户登录"></a>八、禁止SSH空密码用户登录</h2><h3 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h3><p>禁止SSH空密码用户登录</p>
<h3 id="加固建议-7"><a href="#加固建议-7" class="headerlink" title="加固建议"></a>加固建议</h3><p>编辑文件 <code>/etc/ssh/sshd_config</code>，将 PermitEmptyPasswords 配置为 no：</p>
<pre><code class="shell">PermitEmptyPasswords no</code></pre>
<h2 id="九、确保密码到期警告天数为7或更多"><a href="#九、确保密码到期警告天数为7或更多" class="headerlink" title="九、确保密码到期警告天数为7或更多"></a>九、确保密码到期警告天数为7或更多</h2><h3 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h3><p>确保密码到期警告天数为7或更多</p>
<h3 id="加固建议-8"><a href="#加固建议-8" class="headerlink" title="加固建议"></a>加固建议</h3><p>在 /etc/login.defs 中将 PASS_WARN_AGE 参数设置为 7-14之间，建议为7：</p>
<pre><code class="shell">PASS_WARN_AGE 7</code></pre>
<p>同时执行命令使root用户设置生效：</p>
<pre><code class="shell">chage --warndays 7 root</code></pre>
<h2 id="十、确保SSH-MaxAuthTries设置为3到6之间"><a href="#十、确保SSH-MaxAuthTries设置为3到6之间" class="headerlink" title="十、确保SSH MaxAuthTries设置为3到6之间"></a>十、确保SSH MaxAuthTries设置为3到6之间</h2><h3 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h3><p>设置较低的Max AuthTrimes参数将降低SSH服务器被暴力攻击成功的风险。</p>
<h3 id="加固建议-9"><a href="#加固建议-9" class="headerlink" title="加固建议"></a>加固建议</h3><p>在/etc/ssh/sshd_config中取消MaxAuthTries注释符号#，设置最大密码尝试失败次数3-6，建议为4：</p>
<pre><code class="shell">MaxAuthTries 4</code></pre>
<h2 id="十一、SSHD强制使用V2安全协议"><a href="#十一、SSHD强制使用V2安全协议" class="headerlink" title="十一、SSHD强制使用V2安全协议"></a>十一、SSHD强制使用V2安全协议</h2><h3 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h3><p>SSHD强制使用V2安全协议</p>
<p>类型：SSH服务配置</p>
<h3 id="加固建议-10"><a href="#加固建议-10" class="headerlink" title="加固建议"></a>加固建议</h3><p>编辑 /etc/ssh/sshd_config 文件以按如下方式设置参数：</p>
<pre><code class="shell">Protocol 2</code></pre>
<h2 id="十二、确保SSH-LogLevel设置为INFO"><a href="#十二、确保SSH-LogLevel设置为INFO" class="headerlink" title="十二、确保SSH LogLevel设置为INFO"></a>十二、确保SSH LogLevel设置为INFO</h2><h3 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h3><p>确保SSH LogLevel设置为INFO,记录登录和注销活动</p>
<p>类型：服务配置</p>
<h3 id="加固建议-11"><a href="#加固建议-11" class="headerlink" title="加固建议"></a>加固建议</h3><p>编辑 /etc/ssh/sshd_config 文件以按如下方式设置参数(取消注释):</p>
<pre><code class="shell">LogLevel INFO</code></pre>
<h2 id="十三、访问控制配置文件的权限设置"><a href="#十三、访问控制配置文件的权限设置" class="headerlink" title="十三、访问控制配置文件的权限设置"></a>十三、访问控制配置文件的权限设置</h2><h3 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h3><p>访问控制配置文件的权限设置</p>
<p>类型：文件权限</p>
<h3 id="加固建议-12"><a href="#加固建议-12" class="headerlink" title="加固建议"></a>加固建议</h3><p>运行以下4条命令：</p>
<pre><code class="shell">chown root:root /etc/hosts.allow 
chown root:root /etc/hosts.deny 
chmod 644 /etc/hosts.deny
chmod 644 /etc/hosts.allow</code></pre>
<h2 id="十四、开启地址空间布局随机化"><a href="#十四、开启地址空间布局随机化" class="headerlink" title="十四、开启地址空间布局随机化"></a>十四、开启地址空间布局随机化</h2><h3 id="描述-13"><a href="#描述-13" class="headerlink" title="描述"></a>描述</h3><p>它将进程的内存空间地址随机化来增大入侵者预测目的地址难度，从而降低进程被成功入侵的风险</p>
<p>类型：入侵防范</p>
<h3 id="加固建议-13"><a href="#加固建议-13" class="headerlink" title="加固建议"></a>加固建议</h3><p>在/etc/sysctl.conf或/etc/sysctl.d/*文件中设置以下参数： <code>kernel.randomize_va_space = 2</code> 执行命令： <code>sysctl -w kernel.randomize_va_space=2</code></p>
<h2 id="十五、确保root是唯一的UID为0的帐户"><a href="#十五、确保root是唯一的UID为0的帐户" class="headerlink" title="十五、确保root是唯一的UID为0的帐户"></a>十五、确保root是唯一的UID为0的帐户</h2><h3 id="描述-14"><a href="#描述-14" class="headerlink" title="描述"></a>描述</h3><p>除root以外其他UID为0的用户都应该删除，或者为其分配新的UID</p>
<p>类型：身份鉴别</p>
<h3 id="加固建议-14"><a href="#加固建议-14" class="headerlink" title="加固建议"></a>加固建议</h3><p>除root以外其他UID为0的用户(查看命令<code>cat /etc/passwd | awk -F: &#39;($3 == 0) { print $1 }&#39;|grep -v &#39;^root$&#39;</code>)都应该删除，或者为其分配新的UID</p>
<h2 id="十六、确保rsyslog服务已启用"><a href="#十六、确保rsyslog服务已启用" class="headerlink" title="十六、确保rsyslog服务已启用"></a>十六、确保rsyslog服务已启用</h2><h3 id="描述-15"><a href="#描述-15" class="headerlink" title="描述"></a>描述</h3><p>确保rsyslog服务已启用，记录日志用于审计</p>
<p>类型：安全审计</p>
<h3 id="加固建议-15"><a href="#加固建议-15" class="headerlink" title="加固建议"></a>加固建议</h3><p>运行以下命令启用rsyslog服务：</p>
<pre><code class="shell">service rsyslog start</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/08/运维/Linux/Ubuntu搭建SS服务器/index.html">Ubuntu搭建SS服务器</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Linux学习之路/index.html">Linux学习之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Linux/index.html">Linux</a></span><div class="content"><h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><pre><code>1.更新软件源：
    sudo apt-get update
2. 安装 PIP 环境
    sudo apt-get install python-pip
3. 使用 pip 命令安装 shadowsocks
    sudo pip install shadowsocks
4. 如果出现异常，可以尝试升级pip
    pip install -U pip</code></pre><h2 id="二、运行"><a href="#二、运行" class="headerlink" title="二、运行"></a>二、运行</h2><pre><code>(1). 命令启动
    sudo ssserver -p 8388 -k mypassword -m -rc4md5 -d start
(2). 配置文件
    vim /etc/shadowsocks.json
    添加如下内容：
        {
        &quot;server&quot;:&quot;my_server_ip&quot;,
        &quot;server_port&quot;:8388,
        &quot;local_address&quot;:&quot;127.0.0.1&quot;,
        &quot;local_port&quot;:1080,
        &quot;password&quot;:&quot;mypassword&quot;,
        &quot;timeout&quot;:300,
        &quot;method&quot;:&quot;rc4-md5&quot;
        }
        //多个用户的配置
        {
        &quot;server&quot;:&quot;my_server_ip&quot;,
        &quot;port_password&quot;:{
        &quot;9001&quot;:&quot;pwd001&quot;,
        &quot;9002&quot;:&quot;pwd002&quot;,
        &quot;9003&quot;:&quot;pwd003&quot;
        },
        &quot;local_address&quot;:&quot;127.0.0.1&quot;,
        &quot;local_port&quot;:1080,
        &quot;timeout&quot;:300,
        &quot;method&quot;:&quot;rc4-md5&quot;
        }
    3. 赋予 shadowsocks.json 文件权限：
        sudo apt-get install python - m2crypto
    4. 使用配置文件在后台运行
        sudo ssserver -c /etc/shadowsocks.json -d start
    5. 配置开机启动
        编辑 /etc/rc.local 文件
            sudo vim /etc/rc.local
        在 exit 0 上加入：
            /usr/local/bin/ssserver - c /etc/shadowsocks.json
            或
            /usr/local/bin/ssserver -p 8388 -k password -m rc4md5 -d start</code></pre></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/08/运维/Linux/开发环境的初始化/index.html">Linux开发环境初始化</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Linux学习之路/index.html">Linux学习之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Linux/index.html">Linux</a></span><div class="content"><h1 id="在Linux环境下初始化Java开发环境-Ubuntu16-0"><a href="#在Linux环境下初始化Java开发环境-Ubuntu16-0" class="headerlink" title="在Linux环境下初始化Java开发环境(Ubuntu16.0)"></a>在Linux环境下初始化Java开发环境(Ubuntu16.0)</h1><h2 id="一、安装-JDK"><a href="#一、安装-JDK" class="headerlink" title="一、安装 JDK"></a>一、安装 JDK</h2><pre><code class="java">安装 OpenJdk ：
sudo apt-get update     //更新软件包列表
sudo apt-get install openjdk-8-jdk      //安装openjdk-8-jdk
java -version       //查看 java 版本</code></pre>
<p>安装完后的 jdk 和 jre 放在”/usr/lib/jvm/java-8…”</p>
<h2 id="二、安装-Tomcat"><a href="#二、安装-Tomcat" class="headerlink" title="二、安装 Tomcat"></a>二、安装 Tomcat</h2><ol>
<li><p>到官网下载最新的 tomcat：使用 wget 命令下载</p>
<pre><code class="js"> http://mirror.bit.edu.cn/apache/tomcat/tomcat-8/v8.5.31/bin/apache-tomcat-8.5.31.tar.gz</code></pre>
</li>
<li><p>解压 tomcat：</p>
<ol>
<li>tar -zxvf apache-tomcat-8…</li>
<li>注意：下载的压缩文件格式，对应着不同的解压缩命令</li>
</ol>
</li>
<li><p>配置 tomcat：</p>
<ol>
<li><p>将解压后的文件夹修改文件夹 apache-tomcat… 为 tomcat:</p>
<pre><code class="js"> mv apache-tomcat... tomcat  //mv命令可以进行移动也可以进行文件名的修改</code></pre>
</li>
<li><p>将 tomcat 目录 复制到指定目录：</p>
<pre><code class="js"> sudo cp -r tomcat /opt</code></pre>
</li>
<li><p>进入 tomcat 目录：</p>
<pre><code class="js"> cd /opt/tomcat</code></pre>
</li>
<li><p>打开启动的脚本文件</p>
<pre><code class="js"> sudo vi ./bin/startup.sh</code></pre>
</li>
<li><p>添加 jdk 和 jre 变量</p>
<pre><code class="js"> JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
 JRE_HOME=/usr/lib/jvm/java-8-openjdk-amd64/jre
 CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib
 PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH
 TOMCAT_HOME=/opt/apache-tomcat-8.5.32</code></pre>
<p> 注意：这里的目录以真实存在的为主</p>
</li>
</ol>
</li>
<li><p>启动，测试:</p>
<ol>
<li>开启tomcat : <code>sudo ./bin/startup.sh</code></li>
<li>进入浏览器，查看tomcat是否配置和安装成功</li>
<li>关闭tomcat : <code>sudo ./bin/shutdown.sh</code></li>
</ol>
</li>
</ol>
<h2 id="三、安装-Git"><a href="#三、安装-Git" class="headerlink" title="三、安装 Git"></a>三、安装 Git</h2><pre><code>sudo apt-get install git-core
除安装之外，其他命令同 Windows 下。</code></pre><h2 id="四、安装-MySQL-服务"><a href="#四、安装-MySQL-服务" class="headerlink" title="四、安装 MySQL 服务"></a>四、安装 MySQL 服务</h2><ol>
<li><p>安装 mysql</p>
<pre><code class="shell"> sudo apt-get install mysql-server
 sudo apt install mysql-client
 sudo apt install libmysqlclient-dev</code></pre>
</li>
<li><p>测试是否安装成功</p>
<pre><code class="shell"> sudo netstat -tap | grep mysql</code></pre>
<p> 安装成功之后，显示下图：</p>
<p> <img src="http://static.zybuluo.com/xiangwanpeng/p81fqgz0k1782qpwbrtnhmce/image_1b6gfob7m1u4f2i0av11afd92m9.png" alt="安装成功后显示的图片"></p>
</li>
<li><p>测试 进入 mysql 服务</p>
<pre><code class="shell"> mysql -uroot -p</code></pre>
</li>
<li><p>设置 mysql 允许远程访问</p>
<pre><code class="shell"> sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</code></pre>
<p> <img src="http://static.zybuluo.com/xiangwanpeng/sl82tvc6dyqod7j2cnw4qi5b/image_1b6ggmf7h1d6b17o11iha1j1nhtem.png" alt="shell图"></p>
<pre><code> 将其中的 bind-address = 127.0.0.1 注释掉
 :wq 保存退出</code></pre></li>
<li><p>进入 mysql 服务，执行授权命令：</p>
<pre><code class="shell"> grant all on *.* to root@&#39;%&#39; identified by &#39;密码&#39; with grant option;
 flush privileges;</code></pre>
</li>
<li><p>退出并重启 mysql 服务</p>
<pre><code class="shell"> service mysql restart</code></pre>
</li>
<li><p>远程连接测试</p>
</li>
</ol>
<h2 id="四-2、卸载-MySQL-服务"><a href="#四-2、卸载-MySQL-服务" class="headerlink" title="四-2、卸载 MySQL 服务"></a>四-2、卸载 MySQL 服务</h2><ol>
<li>查看mysql安装了哪些依赖<pre><code class="js"> dpkg --list | grep mysql</code></pre>
</li>
<li>卸载 mysql-common 包<pre><code class="js"> sudo apt-get remove mysql-common</code></pre>
</li>
<li>具体看版本<pre><code class="js"> sudo apt-get autoremove --purge mysql-server-5.0</code></pre>
</li>
<li>再次查看 ，同 1</li>
<li>清除残留数据：<pre><code class="js"> dpkg -l |grep ^rc|awk &#39;{print $2}&#39; |sudo xargs dpkg -P</code></pre>
</li>
</ol>
<h2 id="五、安装-MongoDB"><a href="#五、安装-MongoDB" class="headerlink" title="五、安装 MongoDB"></a>五、安装 MongoDB</h2><h3 id="1-安装-MongoDB"><a href="#1-安装-MongoDB" class="headerlink" title="1. 安装 MongoDB"></a>1. 安装 MongoDB</h3><ol>
<li><p>导入软件源的公钥</p>
<pre><code class="js"> sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927</code></pre>
</li>
<li><p>为 mongodb 创建软件源 list 文件</p>
<pre><code class="js"> echo &quot;deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.2 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list</code></pre>
</li>
<li><p>更新本地包数据库</p>
<pre><code class="js"> sudo apt-get update</code></pre>
</li>
<li><p>安装 MongoDB 包</p>
<pre><code class="js"> sudo apt-get install -y mongodb-org</code></pre>
</li>
<li><p>配置启动文件</p>
<ol>
<li><p>打开或者创建 <code>/lib/systemd/system/mongod.service</code></p>
</li>
<li><p>加入以下配置：</p>
<pre><code class="js">[Unit]
Description=High-performance, schema-free document-oriented database
After=network.target
Documentation=https://docs.mongodb.org/manual

[Service]
User=mongodb
Group=mongodb
ExecStart=/usr/bin/mongod --quiet --config /etc/mongod.conf

[Install]
WantedBy=multi-user.target</code></pre>
</li>
</ol>
</li>
<li><p>启动停止</p>
<pre><code class="js"> sudo service mongod start
 sudo service mongod stop
 sudo service mongod restart</code></pre>
</li>
<li><p>卸载mongodb</p>
<pre><code class="js"> sudo service mongod stop        // 停止mongodb
 sudo apt-get purge mongodb-org* // 卸载软件
 sudo rm -r /var/log/mongodb     // 删除日志文件和数据库
 sudo rm -r /var/lib/mongodb</code></pre>
</li>
</ol>
<h3 id="3-配置-MongoDB"><a href="#3-配置-MongoDB" class="headerlink" title="3. 配置 MongoDB"></a>3. 配置 MongoDB</h3><ol>
<li><p>进入 MongoDB</p>
<pre><code class="js"> mongo</code></pre>
</li>
<li><p>切换到admin数据库</p>
<pre><code class="js"> use admin</code></pre>
</li>
<li><p>创建一个管理员用户</p>
<pre><code class="js"> db.createUser({user:&#39;admin&#39;,pwd:&#39;123456&#39;,roles:[{role:&#39;userAdminAnyDatabase&#39;,db:&#39;admin&#39;}]})</code></pre>
</li>
<li><p>打开登录认证</p>
<pre><code class="js"> security:
     authorization:enabled</code></pre>
<p> 启用登录后，需要使用 db.auth(‘admin’,’123456’)认证后，才能操作</p>
</li>
<li><p>启用远程连接</p>
<p> 打开 <code>/etc/mongd.conf</code> 找到 <code>bindIp</code>，注释掉；<br> 或者将<code>bindIp</code> 换成 <code>0.0.0.0</code></p>
<p> ———————2018年9月10日更新——-<br> 1.导入软件源的公钥</p>
<pre><code> sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927</code></pre><p> 2.为mongodb创建软件源list文件</p>
<pre><code> echo &quot;deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.2 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list</code></pre><p> 3.更新软件源，安装mongodb</p>
<pre><code> sudo apt-get update
 sudo apt-get install -y mongodb-org</code></pre><p> 4.配置启动文件</p>
<pre><code> 打开或者创建 /lib/systemd/system/mongod.service
 加入以下配置：
 [Unit]
 Description=High-performance, schema-free document-oriented database
 After=network.target
 Documentation=https://docs.mongodb.org/manual

 [Service]
 User=mongodb
 Group=mongodb
 ExecStart=/usr/bin/mongod --quiet --config /etc/mongod.conf

 [Install]
 WantedBy=multi-user.target</code></pre><p> 5.启动停止</p>
<pre><code> sudo service mongod start
 sudo service mongod stop
 sudo service mongod restart</code></pre><p> 6.卸载mongodb</p>
<pre><code> sudo service mongod stop        // 停止mongodb
 sudo apt-get purge mongodb-org* // 卸载软件
 sudo rm -r /var/log/mongodb     // 删除日志文件和数据库
 sudo rm -r /var/lib/mongodb</code></pre></li>
</ol>
<blockquote>
<p><a href="https://www.chengxulvtu.com/2017/07/16/install-mongodb-on-ubuntu-16-04.html" target="_blank" rel="noopener">https://www.chengxulvtu.com/2017/07/16/install-mongodb-on-ubuntu-16-04.html</a></p>
</blockquote>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/09/08/运维/Linux/Linux下后台运行Jar/index.html">Linux后台部署Jar</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-09-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Linux学习之路/index.html">Linux学习之路</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Linux/index.html">Linux</a></span><div class="content"><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><ol>
<li><p>安装git</p>
</li>
<li><p>拉取代码</p>
<ol>
<li><p>如果不是通过 ssh 的方式拉取的话，每次都需要输入密码</p>
</li>
<li><p>解决方法：进入项目目录，输入：</p>
</li>
<li><pre><code class="shell">git config --global credential.helper store</code></pre>
</li>
<li><p>再重新pull一次，输入密码之后，以后就不用输入密码了</p>
</li>
</ol>
</li>
<li><p>创建可执行文件，用于拉取代码、构建项目</p>
<ol>
<li>需要给可执行文件授权：chmod 777 build.sh</li>
<li>注意权限的大小</li>
</ol>
</li>
<li><p>创建可执行文件，用于执行jar包</p>
<ol>
<li><p>执行文件可以直接通过java -jar 来执行</p>
</li>
<li><p>但是我们需要后台执行 ，用到 nohup</p>
</li>
<li><pre><code class="shell">nohup /usr/local/node/bin/node /www/im/chat.js &gt;&gt; /usr/local/node/output.log 2&gt;&amp;1 &amp;</code></pre>
</li>
<li><p>第二种，是将 jar包注册为服务，通过service stop等方法启动停止</p>
</li>
</ol>
</li>
<li><p>部署前端项目</p>
<ol>
<li><p>安装nodejs</p>
</li>
<li><p>安装yarn，注意，17.0以上的ubuntu需要先卸载cmdtest</p>
<ol>
<li><pre><code class="java">sudo apt remove cmdtest</code></pre>
</li>
<li><pre><code class="java">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; | sudo tee /etc/apt/sources.list.d/yarn.list
sudo apt-get update &amp;&amp; sudo apt-get install yarn</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>重启：</p>
<pre><code class="java">#!/bin/bash
ps -ef | grep &quot;/opt/hifox/PGC/teacherApp/teacherapp-0.0.1-SNAPSHOT.jar&quot; | grep -v grep | awk &#39;{print $2}&#39; | xargs kill -15

pid=`ps -ef | grep &quot;/opt/hifox/PGC/teacherApp/teacherapp-0.0.1-SNAPSHOT.jar&quot; | grep -v grep | awk &#39;{print $2}&#39;` 
while( ! test -z $pid)
do
 sleep 1
 pid=`ps -ef | grep &quot;/opt/hifox/PGC/teacherApp/teacherapp-0.0.1-SNAPSHOT.jar&quot; | grep -v grep | awk &#39;{print $2}&#39;`
echo -n &quot;*&quot; 

done

nohup java -jar teacherapp-0.0.1-SNAPSHOT.jar &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre>
<p>以外部配置文件启动jar<br>   加载properties优先级：</p>
<pre><code>        1. jar包同级目录下，config目录下的application.properties
              jar包同级目录下的application.properties
                   3. 最后才是jar内的application.properties
                   依旧是 java -jar app.jar，默认按照上面的加载优先级加载。
                   也可以手动指定 java -jar app.jar -Dspring.config.location=application.properties</code></pre><p>注意：cas和common需要是同一个数据库</p>
<p>通过maven的默认仓库位置在 /root/.m2 ，这个文件夹可能被隐藏了</p>
<p>查找方式为：find / .m2 ，表示查找”/“目录下的 .m2 文件或文件夹</p>
<p>注意：当在shell终端中使用 ctrl+s 表示暂停当前命令行窗口，取消暂停为：ctrl+q</p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By koral</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>