<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="罗凯的博客主页"><meta name="keywords" content="博客,全栈工程师,前端工程师,后端工程师,运维工程师,罗凯的博客,罗凯,DevOps,技术博客"><meta name="author" content="koral"><meta name="copyright" content="koral"><title>现在的我可以做点什么，让未来的我可以受益匪浅？ | 凯</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">koral</div><div class="author-info__description text-center">罗凯的博客主页</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">314</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">48</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">59</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/index.html">凯</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于我</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">凯</div><div id="site-sub-title">现在的我可以做点什么，让未来的我可以受益匪浅？</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useInViewport/">《Umi Hooks》官网笔记-useInViewport</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useInViewport"><a href="#useInViewport" class="headerlink" title="useInViewport"></a>useInViewport</h1><p>一个用于判断 dom 元素是否在可视范围之内的 Hook。</p>
<pre><code class="js">const [
    // 判断dom元素是否在可视范围之内的标志
    inViewPort,
    // 当未传入任何参数时，将 ref 绑定给需监听的节点
    ref?
] = useInViewport(
    // 如果未传入则会监听返回结果中的 ref，否则会监听传入的节点
    dom?
);</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Advanced/useCreation/">《Umi Hooks》官网笔记-useCreation</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useCreation"><a href="#useCreation" class="headerlink" title="useCreation"></a>useCreation</h1><p><code>useCreation</code> 是 <code>useMemo</code> 或 <code>useRef</code> 的替代品。</p>
<p>因为 <code>useMemo</code> 不能保证被 memo 的值一定不会被重复计算，而 <code>useCreation</code> 可以保证这一点。以下为 React 官方文档中的介绍：</p>
<blockquote>
<p><strong>You may rely on useMemo as a performance optimization, not as a semantic guarantee.</strong>In the future, React may choose to “forget” some previously memoized values and recalculate them on next render, e.g. to free memory for offscreen components. Write your code so that it still works without <code>useMemo</code> — and then add it to optimize performance.</p>
</blockquote>
<p>而相比于 useRef，你可以使用 useCreation 创建一些常量，这些常量和 <code>useRef</code> 创建出来的 ref 有很多使用场景上的相似，但对于复杂常量的创建，<code>useRef</code> 却容易出现潜在的性能隐患。</p>
<pre><code class="js">// 每次重渲染，都会执行实例化 subject 的过程，即便这个实例立刻就被扔掉了
const a = useRef(new Subject());
// 通过 factory 函数，可以避免性能隐患
const b = useCreation(() =&gt; new Subject(), []);</code></pre>
<h2 id="一、API"><a href="#一、API" class="headerlink" title="一、API"></a>一、API</h2><pre><code class="js">// factory：用来创建所需对象的函数
// deps：传入依赖变化的对象
function useCreation&lt;T&gt;(factory: () =&gt; T, deps: any[]): T;</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useMouse/">《Umi Hooks》官网笔记-useMouse</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useMouse"><a href="#useMouse" class="headerlink" title="useMouse"></a>useMouse</h1><p>一个跟踪鼠标位置的 Hook。</p>
<pre><code class="js">const state : {
    // 距离显示器左侧的距离
    screenX: number, 
    // 距离显示器顶部的距离
    screenY: number, 
    // 距离当前视窗左侧的距离
    clientX: number, 
    // 距离当前视窗顶部的距离
    clientY: number,
    // 距离完整页面顶部的距离
    pageX: number,
    // 距离完整页面顶部的距离
    pageY: number,
} = useMouse();</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useResponsive/">《Umi Hooks》官网笔记-useResponsive</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useResponsive"><a href="#useResponsive" class="headerlink" title="useResponsive"></a>useResponsive</h1><p>获取响应式信息。</p>
<pre><code class="js">interface ResponsiveConfig {
    [key: string]: number;
}

interface ResponsiveInfo {
    [key: string]: boolean;
}

function configResponsive(config: ResponsiveConfig): void

function useResponsive(): ResponsiveInfo</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useScroll/">《Umi Hooks》官网笔记-useScroll</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useScroll"><a href="#useScroll" class="headerlink" title="useScroll"></a>useScroll</h1><p>获取元素的滚动状态。</p>
<pre><code class="js">interface Position {
    left: number;
    top: number;
}

type Target = HTMLElement | Document;

function useScroll&lt;T extends Target&gt;(): [
    // 滚动容器当前的滚动位置
    Position,
    // 当未传入任何参数时，将 ref 绑定给需监听的节点
    MutableRefObject&lt;T&gt;
]

function useScroll&lt;T extends Target&gt;(arg: Target | (() =&gt; Target)): [Position]{}</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useSize/">《Umi Hooks》官网笔记-useSize</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useSize"><a href="#useSize" class="headerlink" title="useSize"></a>useSize</h1><p>一个用于监听 dom 节点尺寸变化的 Hook。</p>
<pre><code class="js">const [
    // dom节点的尺寸和位置：{width: number, height: number}
    state,
    // 当未传入任何参数时，将ref绑定给需要监听的节点
    ref?
] = useSize(
    // 如果未传入则会监听返回结果中的 ref，否则会监听传入的节点
    dom?
);</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/SideEffect/useDebounce/">《Umi Hooks》官网笔记-useDebounce</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useDebounce"><a href="#useDebounce" class="headerlink" title="useDebounce"></a>useDebounce</h1><p>用来处理防抖值的 Hook。</p>
<h2 id="一、API"><a href="#一、API" class="headerlink" title="一、API"></a>一、API</h2><pre><code class="js">const debouncedValue = useDebounce(
    // 需要防抖的值
    value: any,
    // 防抖等待时间(1000毫秒)
    wait: number
);</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/Dom/useTextSelection/">《Umi Hooks》官网笔记-useTextSelection</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useTextSelection"><a href="#useTextSelection" class="headerlink" title="useTextSelection"></a>useTextSelection</h1><p>实时获取用户当前选取的文本内容及位置。</p>
<pre><code class="js">const [
    // dom节点内选取文本的内容
    state: {
        // 用户选取的文本值
        text,
        // 文本的左坐标
        left,
        // 文本的右坐标
        right,
        // 文本的顶坐标
        top,
        // 文本的底坐标
        bottom,
        // 文本的高度
        height,
        // 文本的宽度
        width
    },
    // 当未传入任何参数时，将 ref 绑定给需监听的节点
    ref?
] = useTextSelection(
    dom?
)</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/SideEffect/useThrottle/">《Umi Hooks》官网笔记-useThrottle</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useThrottle"><a href="#useThrottle" class="headerlink" title="useThrottle"></a>useThrottle</h1><p>用来处理值节流 Hook。</p>
<pre><code class="js">const ThrottledValue = useThrottle(
    // 需要节流变化的值
    value: any,
    // 防抖等待时间(默认1000毫秒)
    wait: number
)</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/21/前端/UmiHooks/State/useBoolean/">《Umi Hooks》官网笔记-useBoolean</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/Umi-Hooks/">Umi/Hooks</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/hide/">hide</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Umi-Hooks/">Umi/Hooks</a></span><div class="content"><h1 id="useBoolean"><a href="#useBoolean" class="headerlink" title="useBoolean"></a>useBoolean</h1><p>优雅的管理 boolean 值的 Hook。</p>
<pre><code class="js">const {
    state,
    toggle,
    setTrue,
    setFalse
} = useBoolean(
    defaultValue?: boolean
);</code></pre>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By koral</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>