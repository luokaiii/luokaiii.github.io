---
title: RabbitMQ(六)-RPC远程调用
date: 2019-12-10 10:00:00
tags: 
- RabbitMQ
- hide
categories:
- 后端
- 消息队列
- RabbitMQ
---

# 六、RPC 远程调用

没用过RPC调用，这里只记录实现思路，不做具体实现。完整文档详见最后的**参考资料**。

## 摘要

![RPC远程调用](https://i.loli.net/2019/12/10/OzE7aFrcbWH2MS3.png)

工作流程如下：

- Client 客户端发送一条带有两个属性的消息：replyTo 设置为专门为请求创建的匿名独占队列；correlationId 
- 请求被发送到 **rpc_queue** 队列中
- 服务器等待来自 **rpc_queue** 队列上的请求，当请求出现时，执行并使用来自 replyTo 的字段
- 客户端等待应答队列上的数据，当有消息出现时，检查 correlationId，如果匹配，则返回应用程序的相应结果

Message Properties：

- deliveryMode：将消息标记为持久性(2)或暂时
- contentType：用于描述编码的mime类型
- replyTo：用于命名回调队列
- correlationId：用于将 RPC 响应与请求关联
- ...

## 二、参考资料

- [RabbitMQ Tutorials - RPC](https://www.rabbitmq.com/tutorials/tutorial-six-java.html)