---
title: ElasticSearch 实战
date: 2020-08-10 10:16:00
tags:
  - ElasticSearch
  - hide
categories:
  - 后端
  - java
  - ElasticSearch
---

## Elasticsearch

1. 下载zip
2. 解压
3. 查看并指定JAVA_HOME
   1. export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
   2. echo $JAVA_HOME
4. 如果是阿里云服务器，还需要创建一个账户
5. 关闭xpack
6. 本地测试：curl http://127.0.0.1:9200/?pretty
7. 开启外部访问：
   1. 修改 yml: `network.host: 0.0.0.0`
   2. 两个异常：ERROR: [2] bootstrap checks failed 
      1. [1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144] 
      2. 解决方法：`sudo vim /etc/sysctl.conf`，添加配置 `vm.max_map_count=655350`，验证 `sudo sysctl -p`
      3. [2]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured
      4. 解决方法：`vim elasticsearch.yml`，放开 `cluster.initial_master_nodes: ["node-1", "node-2"]`

## Kibana

1. 下载(注意版本)
   1. wget https://repo.huaweicloud.com/kibana/7.8.0/kibana-7.8.0-linux-x86_64.tar.gz
2. 解压
   1. tar -zxvf xxx
3. 