---
title: SpringBoot+Docker+Jenkis+Git持续化集成(一)：安装Docker
date: 2018-10-11 11:23:10
tags: 
  - docker
  - java
categories:
  - Docker学习
---

# 安装Docker for Windows

![Docker for Windows](https://upload-images.jianshu.io/upload_images/13603359-b91f23b00455e174.png)

<!-- More -->

## 一、在Win10系统下安装Docker

安装前提：

1. Windows 10 64位：Pro，Enterprise或Education
2. 在 `Windows 功能` 中开启 `Hyper-V` 功能
3. [下载 Docker](https://www.docker.com/products/docker-desktop)，双击运行即可

## 坑：

### 1. 安装完 Dokcer 之后，提示未找到 CA

```shell
C:\Users\user>docker
could not read CA certificate "C:\\Users\\user\\.docker\\machine\\machines\\default\\ca.pem": open C:\Users\user\.docker\machine\machines\default\ca.pem: The system cannot find the path specified.
```

`原因` ：当从 Docker Toolbox 升级到 Docker for Windows 之后，卸载 Docker Toolbox 时，不会删除用户的 env变量。

`解决方法` ：

1. 从应用管理中卸载 Docker Toolbox
2. 卸载 VirtualBox(`不能同时使用 Docker 和 Virtualbox，因为 Docker Toolbox 和 HType-V 是必须的`)
3. 删除 Docker Toolbox env 变量：
    1. 进入系统变量设置：
    2. 从系统/yoghurt变量中删除所有“DOCKER_*”的条目
        1. DOCKER_TLS_VERIFY
        2. DOCKER_CERT_PATH
        3. DOCKER_HOST
        4. DOCKER_TOOLBOX_INSTALL_PATH
4. 从命令提示符或者 PowerShell 中删除 Docker_*:

```shell
[Environment]::SetEnvironmentVariable("DOCKER_CERT_PATH", $null, "User")
[Environment]::SetEnvironmentVariable("DOCKER_HOST", $null, "User")
[Environment]::SetEnvironmentVariable("DOCKER_MACHINE_NAME", $null, "User")
[Environment]::SetEnvironmentVariable("DOCKER_TLS_VERIFY", $null, "User")
[Environment]::SetEnvironmentVariable("DOCKER_TOOLBOX_INSTALL_PATH", $null, "User")
```

5. 重新启动 PowerShell，测试 Docker 命令。(如有必要，也可以重启)

### 2. 无法启动 Ubuntu

![image.png](https://upload-images.jianshu.io/upload_images/13603359-4aa636098789359a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

原因：新版的 Docker for Windows 默认使用的是 Windows 模式

[官方文档](https://docs.docker.com/docker-for-windows/#test-your-installation)