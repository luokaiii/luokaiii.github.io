---
title: MongoDB数据的备份与恢复
date: 2020-03-01
tags:
  - hide
categories:
  - 数据库
  - MongoDB
---

介绍 mongodb 提供的两个应用 `mongodump` 和 `mongorestore` 的用法.

<!-- more -->

## 一、备份脚本

```sh
mongodump.exe -v --host localhost:27017 --username root --password Hifox2017 --authenticationDatabase admin -d "ch_node" --archive=D:/mongodump --gzip
```

- 使用 mongodump 程序备份数据库
- `--host` 指定要备份的数据库所在 ip 及端口
- `--username/--password` 数据库用户名及密码
- `--authenticationDatabase` 认证数据库，一般都是'admin'
- `-d` 指定要备份的库
- `--archive` 指定备份文件的存储路径

## 二、恢复脚本

```sh
mongorestore.exe -v --host localhost:27017 --gzip --archive=D:/mongodump --objcheck --drop
```

- 使用 mongorestore 从文件中恢复数据库
- `--host` 指定要恢复的数据库所在 ip 及端口
- `--gzip` 解压缩数据库文件
- `--archive` 指定备份文件的存储路径
- `--objcheck` 插入之前进行验证
- `--drop` 删除原有库
