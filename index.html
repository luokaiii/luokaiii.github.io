<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="罗凯的博客主页"><meta name="keywords" content="博客,全栈工程师,前端工程师,后端工程师,运维工程师,罗凯的博客,罗凯,DevOps,技术博客"><meta name="author" content="koral"><meta name="copyright" content="koral"><title>现在的我可以做点什么，让未来的我可以受益匪浅？ | 凯</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">koral</div><div class="author-info__description text-center">罗凯的博客主页</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">291</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">38</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">48</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/index.html">凯</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于我</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">凯</div><div id="site-sub-title">现在的我可以做点什么，让未来的我可以受益匪浅？</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/12/30/blog/2020/">2020年目标</a><span class="article-meta"><i class="fa fa-thumb-tack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator" style="margin-right: 0.3rem">|</span></span><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-12-30</time><div class="content"><p>简单介绍一下 2020 年的目标，及具体完成情况.</p>
<table>
<thead>
<tr>
<th>目标</th>
<th>具体</th>
<th>完成情况</th>
</tr>
</thead>
<tbody><tr>
<td>LeetCode 题库</td>
<td>无要求</td>
<td>已解决：9/1572</td>
</tr>
<tr>
<td>UmiJS 文档</td>
<td><a href="https://umijs.org/zh-CN/docs" target="_blank" rel="noopener">文档</a>、<a href="https://umijs.org/zh-CN/config" target="_blank" rel="noopener">配置</a>、<a href="https://umijs.org/zh-CN/api" target="_blank" rel="noopener">API</a></td>
<td>已完成</td>
</tr>
<tr>
<td>Mock.JS</td>
<td><a href="https://github.com/nuysoft/Mock/wiki" target="_blank" rel="noopener">文档</a></td>
<td>已完成</td>
</tr>
<tr>
<td>UmiJS-Hooks</td>
<td><a href="https://hooks.umijs.org/zh-CN/hooks/async" target="_blank" rel="noopener">文档</a></td>
<td>已完成</td>
</tr>
<tr>
<td>科幻小说</td>
<td>带上她的眼睛</td>
<td></td>
</tr>
<tr>
<td>immer.js</td>
<td><a href="https://immerjs.github.io/immer/docs/introduction" target="_blank" rel="noopener">文档</a></td>
<td>已完成</td>
</tr>
<tr>
<td>SSR - UmiJS</td>
<td><a href="https://umijs.org/zh-CN/docs/ssr" target="_blank" rel="noopener">文档</a></td>
<td>已完成</td>
</tr>
<tr>
<td>MyBatis-Plus</td>
<td><a href="https://mp.baomidou.com/guide" target="_blank" rel="noopener">文档</a></td>
<td>已完成</td>
</tr>
<tr>
<td>Java 开发手册(泰山版)</td>
<td><a href="https://github.com/alibaba/p3c" target="_blank" rel="noopener">Ali p3c 地址</a></td>
<td>已完成</td>
</tr>
</tbody></table></div><a class="more" href="/2020/12/30/blog/2020/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/07/后端/ElasticSearch/Elasticsearch命令/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-07</time><div class="content"><table>
<thead>
<tr>
<th>命令</th>
<th>响应</th>
<th>命令描述</th>
<th>字段描述</th>
</tr>
</thead>
<tbody><tr>
<td>GET /_cluster/health</td>
<td>{<br>  “cluster_name” : “elasticsearch”,<br>  “status” : “yellow”,<br>  “timed_out” : false,<br>  “number_of_nodes” : 1,<br>  “number_of_data_nodes” : 1,<br>  “active_primary_shards” : 7,<br>  “active_shards” : 7,<br>  “relocating_shards” : 0,<br>  “initializing_shards” : 0,<br>  “unassigned_shards” : 1,<br>  “delayed_unassigned_shards” : 0,<br>  “number_of_pending_tasks” : 0,<br>  “number_of_in_flight_fetch” : 0,<br>  “task_max_waiting_in_queue_millis” : 0,<br>  “active_shards_percent_as_number” : 87.5<br>}</td>
<td>显示 Elasticsearch 的集群监控信息</td>
<td>status: 集群健康状况 grren 正常 / yellow 主分片正常 / red 有主分片未正常运行</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/07/后端/ElasticSearch/2.基础入门-集群内的原理/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-07</time><div class="content"><h1 id="集群内的原理"><a href="#集群内的原理" class="headerlink" title="集群内的原理"></a>集群内的原理</h1><blockquote>
<p>这是补充章节的第一篇，介绍 Elasticsearch 在分布式环境中的运行原理。介绍 cluster、node、shard 等常用术语，Elasticsearch 的扩容机制，以及如何处理硬件故障的内容。</p>
</blockquote>
<p>本章将讲述如何按需配置集群、节点和分片，并在硬件故障时确保数据安全。</p>
<h2 id="一、空集群"><a href="#一、空集群" class="headerlink" title="一、空集群"></a>一、空集群</h2><p>一个不包含任何数据和索引的单独节点的集群，就是空集群。</p>
<p>一个运行中的 Elasticsearch 实例称为一个节点，而集群是由一个或多个拥有相同 <code>cluster.name</code> 配置的节点组成，它们共同承担数据和负载的压力。当有节点加入集群中或者从集群中移除节点时，集群会重新平均分布所有的数据。</p>
<p>当一个节点被选举为主节点时，它将负责管理集群范围内的所有变更，如增删索引、增删节点等。而主节点并不需要涉及到文档级别的变更和搜索等操作。任何节点都能成为主节点。</p>
<p>作为用户，我们可以将请求发送到集群的任何节点，包括主节点。每个节点都知道任意文档所处的位置，并且能将我们的请求直接转发到存储我们所需文档的节点。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/07/后端/ElasticSearch/1.基础入门-简介/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-07</time><div class="content"><h1 id="第一章：基础入门"><a href="#第一章：基础入门" class="headerlink" title="第一章：基础入门"></a>第一章：基础入门</h1><p>ElasticSearch 是一个实时的分布式搜索分析引擎，被认作是全文检索、结构化搜索和分析这三个功能的组合。</p>
<p>Elasticsearch 建立在全文搜索引擎库 Apache Lucene 基础之上。</p>
<h2 id="一、安装并运行Elasticsearch"><a href="#一、安装并运行Elasticsearch" class="headerlink" title="一、安装并运行Elasticsearch"></a>一、安装并运行Elasticsearch</h2><h3 id="1-1-下载Elasticsearch"><a href="#1-1-下载Elasticsearch" class="headerlink" title="1.1 下载Elasticsearch"></a>1.1 下载Elasticsearch</h3><h4 id="1-1-1-下载Elasticsearch"><a href="#1-1-1-下载Elasticsearch" class="headerlink" title="1.1.1 下载Elasticsearch"></a>1.1.1 下载Elasticsearch</h4><ol>
<li>从 elastic 官网获取最新版本：<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">https://www.elastic.co/cn/downloads/elasticsearch</a></li>
<li>从国内镜像站下载：<a href="https://repo.huaweicloud.com/elasticsearch/" target="_blank" rel="noopener">https://repo.huaweicloud.com/elasticsearch/</a></li>
<li>使用Docker安装：<code>docker pull docker.elastic.co/elasticsearch/elasticsearch:7.8.0</code></li>
</ol>
<h4 id="1-1-2-启动Elasticsearch"><a href="#1-1-2-启动Elasticsearch" class="headerlink" title="1.1.2 启动Elasticsearch"></a>1.1.2 启动Elasticsearch</h4><ol>
<li><p>Linux 环境下：<code>./bin/elasticsearch</code></p>
</li>
<li><p>Windows 环境下：<code>./bin/elasticsearch.bat</code></p>
</li>
<li><p>Docker：<code>docker run -p 9200:9200 -p 9300:9300 -e &quot;descovery.type=single-node&quot; docker.elastic.co/elasticsearch/elasticsearch:7.8.0</code> </p>
</li>
<li><p>Docker Compose:</p>
<ol>
<li><p>创建 <code>docker-compse.yml</code> 文件</p>
<pre><code class="yml">version: &#39;2.2&#39;
services:
    es01:
        image: docker.elastic.co/elasticsearch/elasticsearch:7.8.0
        container_name: es01
        environment:
            - node.name=es01
            - cluster.name=es-docker-cluster
            - discovery.seed_hosts=es02,es03
            - cluster.initial_master_nodes=es01,es02,es03
            - bootstrap.memory_lock=true
            - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;
        ulimits:
            memlock:
                soft: -1
                hard: -1
        volumes:
            - data01:/usr/share/elasticsearch/data
        ports:
            9200:9200
        networks:
            - elastic
    es02:
        image: docker.elastic.co/elasticsearch/elasticsearch:7.8.0
        container_name: es02
        environment:
            - node.name=es02
            - cluster.name=es-docker-cluster
            - discovery.seed_hosts=es01,es03
            - cluster.initial_master_nodes=es01,es02,es03
            - bootstrap.memory_lock=true
            - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;
        ulimits:
            memlock:
                soft: -1
                hard: -1
        volumes:
            - data02:/usr/share/elasticsearch/data
        networks:
            - elastic
    es03:
        image: docker.elastic.co/elasticsearch/elasticsearch:7.8.0
        container_name: es03
        environment:
            - node.name=es03
            - cluster.name=es-docker-cluster
            - discovery.seed_hosts=es01,es02
            - cluster.initial_master_nodes=es01,es02,es03
            - bootstrap.memory_lock=true
            - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;
        ulimits:
            memlock:
                soft: -1
                hard: -1
        volumes:
            - data03:/usr/share/elasticsearch/data
        networks:
            - elastic

volumns:
    data01:
        driver: local
    data02:
        driver: local
    data03:
        driver: local

networks:
    elastic:
        driver: bridge</code></pre>
</li>
<li><p>启动 <code>docker-compse up</code></p>
</li>
</ol>
</li>
</ol>
<h4 id="1-1-3-测试"><a href="#1-1-3-测试" class="headerlink" title="1.1.3 测试"></a>1.1.3 测试</h4><p>执行：<code>curl http://localhost:9200/?pretty</code>，可得到如下响应：</p>
<pre><code class="json">{
  &quot;name&quot; : &quot;DESKTOP-6N3N71M&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;-oFT3sGkRAK9RqgTFMYvSQ&quot;,
  &quot;version&quot; : {
    &quot;number&quot; : &quot;7.8.0&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;zip&quot;,
    &quot;build_hash&quot; : &quot;757314695644ea9a1dc2fecd26d1a43856725e65&quot;,
    &quot;build_date&quot; : &quot;2020-06-14T19:35:50.234439Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;8.5.1&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;
  },
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
}</code></pre>
<h3 id="1-2-安装Kibana"><a href="#1-2-安装Kibana" class="headerlink" title="1.2 安装Kibana"></a>1.2 安装Kibana</h3><p>Kibana 是与 Elasticsearch 一起使用的开源分析和可视化平台。用于与 Elasticsearch 索引中存储的数据进行交互。可以轻松的执行高级数据分析，并在各种图表、表格和地图中可视化数据。</p>
<h4 id="1-2-1-下载Kibana"><a href="#1-2-1-下载Kibana" class="headerlink" title="1.2.1 下载Kibana"></a>1.2.1 下载Kibana</h4><ol>
<li>官网下载：<a href="https://www.elastic.co/cn/downloads/kibana" target="_blank" rel="noopener">https://www.elastic.co/cn/downloads/kibana</a></li>
<li>华为镜像站：<a href="https://repo.huaweicloud.com/kibana/" target="_blank" rel="noopener">https://repo.huaweicloud.com/kibana/</a></li>
<li><a href="elastic.co/guide/en/kibana/4.6/setup-repositories.html">Unix上使用apt-get</a>：<ol>
<li>下载GPG：<code>wget -qO - https://packages.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -</code></li>
<li>添加仓库：<code>echo &quot;deb https://packages.elastic.co/kibana/4.6/debian stable main&quot; | sudo tee -a /etc/apt/sources.list.d/kibana.list</code></li>
<li>安装Kibana：<code>sudo apt-get update &amp;&amp; sudo apt-get install kibana</code></li>
<li>初始化：<code>sudo update-rc.d kibana defaults 95 10</code></li>
<li>使用服务(可选)：<code>sudo /bin/systemctl daemon-reload  sudo /bin/systemctl enable kibana.service</code></li>
</ol>
</li>
</ol>
<h4 id="1-2-2-启动Kibana"><a href="#1-2-2-启动Kibana" class="headerlink" title="1.2.2 启动Kibana"></a>1.2.2 启动Kibana</h4><p>从安装目录运行：<code>bin/kibana</code>，并访问 <code>localhost:5601</code>，可得到类似如下页面：</p>
<p><img src="C:%5CUsers%5Cuser%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200807140927461.png" alt="image-20200807140927461"></p>
<h3 id="1-3-安装Sense"><a href="#1-3-安装Sense" class="headerlink" title="1.3 安装Sense"></a>1.3 安装Sense</h3><p>最新版本已不需要安装Sense了，而改用<a href="http://localhost:5601/app/kibana#/dev_tools/console" target="_blank" rel="noopener">Dev Tools: http://localhost:5601/app/kibana#/dev_tools/console</a>。</p>
<h2 id="二、与-Elasticsearch-交互"><a href="#二、与-Elasticsearch-交互" class="headerlink" title="二、与 Elasticsearch 交互"></a>二、与 Elasticsearch 交互</h2><h2 id="2-1-Java-API"><a href="#2-1-Java-API" class="headerlink" title="2.1 Java API"></a>2.1 Java API</h2><p>Elasticsearch 内置两个客户端：</p>
<ul>
<li>节点客户端 Node Client：<ul>
<li>节点客户端作为一个非数据节点加入到本地集群中。它本身不保存任何数据，但它知道数据在集群的哪个节点中，并且可以把请求转发到正确的节点</li>
</ul>
</li>
<li>传输客户端 Transport client：<ul>
<li>轻量级的传输客户端，将请求转发到远程集群。它本身不加入集群，但是可将请求转发到集群中的节点上</li>
</ul>
</li>
</ul>
<h2 id="2-2-Restfule-API-with-JSON-over-HTTP"><a href="#2-2-Restfule-API-with-JSON-over-HTTP" class="headerlink" title="2.2 Restfule API with JSON over HTTP"></a>2.2 Restfule API with JSON over HTTP</h2><p>使用 Restful API 通过 9200 端口与 Elasticsearch 通信。</p>
<p>请求格式为：<code>curl -X&lt;VERB&gt; &#39;&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;&#39; -d &#39;&lt;BODY&gt;&#39;</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>VERB</td>
<td>HTTP 方法，如GET、POST、PUT、HEAD、DELETE</td>
</tr>
<tr>
<td>PROTOCOL</td>
<td>协议，如 HTTP、HTTPS</td>
</tr>
<tr>
<td>HOST</td>
<td>ES 任意节点的主机名</td>
</tr>
<tr>
<td>PORT</td>
<td>ES 服务的端口号，默认9200</td>
</tr>
<tr>
<td>PATH</td>
<td>API 终端路径（如_count将返回集群中文档数量）</td>
</tr>
<tr>
<td>QUERY_STRING</td>
<td>查询参数（如?pretty会格式化输出JSON值）</td>
</tr>
<tr>
<td>BODY</td>
<td>JSON 格式的请求体</td>
</tr>
</tbody></table>
<blockquote>
<p>可使用 Kibana 提供的 Dev TOOLS 进行测试</p>
</blockquote>
<p><img src="https://luokaiii.oss-cn-shanghai.aliyuncs.com/blog/elasticsearch/devtools.png" alt="运行结果"></p>
<h2 id="三、面向文档"><a href="#三、面向文档" class="headerlink" title="三、面向文档"></a>三、面向文档</h2><p>Elasticsearch 是面向文档的，意味着它存储整个对象或文档，并索引每个文档的内容，使之能够被检索。</p>
<h2 id="四、使用方法"><a href="#四、使用方法" class="headerlink" title="四、使用方法"></a>四、使用方法</h2><blockquote>
<p>注：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-type-field.html" target="_blank" rel="noopener">_type 字段，在 ES6.0之后就过期了</a>。去不去掉使用方法都是一致的。</p>
</blockquote>
<h3 id="4-1-创建文档"><a href="#4-1-创建文档" class="headerlink" title="4.1 创建文档"></a>4.1 创建文档</h3><p>向 ES 中插入几条信息：</p>
<pre><code class="json">PUT /megacorp/employee/1
{
  &quot;first_name&quot;: &quot;John&quot;,
  &quot;last_name&quot;: &quot;Smith&quot;,
  &quot;age&quot;: 25,
  &quot;about&quot;: &quot;I love to go rock climbing&quot;,
  &quot;interests&quot;: [&quot;sports&quot;,&quot;music&quot;]
}

PUT /megacorp/employee/2
{
    &quot;first_name&quot; :  &quot;Jane&quot;,
    &quot;last_name&quot; :   &quot;Smith&quot;,
    &quot;age&quot; :         32,
    &quot;about&quot; :       &quot;I like to collect rock albums&quot;,
    &quot;interests&quot;:  [ &quot;music&quot; ]
}

PUT /megacorp/employee/3
{
    &quot;first_name&quot; :  &quot;Douglas&quot;,
    &quot;last_name&quot; :   &quot;Fir&quot;,
    &quot;age&quot; :         35,
    &quot;about&quot;:        &quot;I like to build cabinets&quot;,
    &quot;interests&quot;:  [ &quot;forestry&quot; ]
}</code></pre>
<ul>
<li>megacorp ：索引名称，对应 <code>_index</code> 字段</li>
<li>employee：类型名称。对应 <code>_type</code> 字段</li>
<li>1：特定的ID，对应 <code>_id</code> 字段</li>
</ul>
<h3 id="4-2-检索文档"><a href="#4-2-检索文档" class="headerlink" title="4.2 检索文档"></a>4.2 检索文档</h3><ul>
<li><p><code>GET /megacorp/employee/1</code>：可返回原始的 JSON 文档。</p>
</li>
<li><p><code>GET /megacorp/employee/_search</code>：<strong>搜索所有雇员</strong>，并将结果置于 hits 中</p>
</li>
<li><p><code>GET /megacorp/employee/_search?q=last_name:Smith</code>：<strong>条件查询</strong>，条件跟在 <code>?q=</code> 后面，可与表达式查询一起使用</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;last_name&quot;: &quot;Smith&quot;
    }
  }
}</code></pre><p>：<strong>DSL 表达式查询</strong>，可与条件查询一起使用</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;must&quot;: [
        {&quot;match&quot;: {
          &quot;last_name&quot;: &quot;smith&quot;
        }}
      ],
      &quot;filter&quot;: [
        {&quot;range&quot;: {
          &quot;age&quot;: {
            &quot;gte&quot;: 30
          }
        }}
      ]
    }
  }
}</code></pre><p>：<strong>复杂条件查询</strong>，查询姓氏为 Smith 的员工，且年龄大于30岁的</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;about&quot;: &quot;rock climbing&quot;
    }
  }
}</code></pre><p>：<strong>全文搜索</strong>，使用 <code>match</code> 查询在 <code>about</code> 属性上搜索 <code>rock climbing</code>；<code>_score</code> 为相关性得分，数值越大匹配度越高。这也是完全区别于传统关系型数据库的，数据库中的记录要么匹配要么不匹配。</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;query&quot;: {
    &quot;match_phrase&quot;: {
      &quot;about&quot;: &quot;rock climbing&quot;
    }
  }
}</code></pre><p>：<strong>短语搜索</strong>，使用 <code>match_phrase</code> 精确匹配一系列单词或短语</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;query&quot;: {
    &quot;match_phrase&quot;: {
      &quot;about&quot;: &quot;rock climbing&quot;
    }
  },
  &quot;highlight&quot;: {
    &quot;fields&quot;: {
      &quot;about&quot;: {}
    }
  }
}</code></pre><p>：<strong>高亮搜索</strong>，使用 <code>highlight</code> 参数指定高亮字段；返回结果中，多了 <code>highlight</code> 字段，并用 <code>&lt;em&gt;&lt;/em&gt;</code> 包含了 <code>about</code> 匹配的文本片段</p>
</li>
<li><pre><code>GET /megacorp/employee/_search
{
  &quot;aggs&quot;: {
    &quot;all_interests&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;interests&quot;,
        &quot;size&quot;: 10
      }
    }
  }
}</code></pre><p>：<strong>聚合搜索</strong>，查询员工的兴趣爱好。</p>
<ul>
<li><blockquote>
<p>这里在测试时，出现了异常。详见下方的“存在的问题：聚合搜索异常”</p>
</blockquote>
</li>
</ul>
</li>
<li><pre><code>GET /megacorp/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;last_name&quot;: &quot;smith&quot;
    }
  }, 
  &quot;aggs&quot;: {
    &quot;all_interests&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;interests&quot;,
        &quot;size&quot;: 10
      }
    }
  }
}</code></pre><p>：<strong>带匹配条件的聚合搜索</strong>，查询姓氏为Smith 的员工爱好</p>
</li>
<li><pre><code>GET /megacorp/_search
{
  &quot;aggs&quot;: {
    &quot;all_interests&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;interests&quot;,
        &quot;size&quot;: 10
      },
      &quot;aggs&quot;: {
        &quot;avg_age&quot;: {
          &quot;avg&quot;: {&quot;field&quot;:&quot;age&quot;}
        }
      }
    }
  }
}</code></pre><p>：<strong>分级汇总聚合</strong>，查询特定兴趣爱好员工的平均年龄</p>
</li>
<li></li>
</ul>
<h3 id="4-3-删除文档"><a href="#4-3-删除文档" class="headerlink" title="4.3 删除文档"></a>4.3 删除文档</h3><p>同 4.2，将 GET 改为 DELETE，将删除指定ID的文档。</p>
<h3 id="4-4-更新文档"><a href="#4-4-更新文档" class="headerlink" title="4.4 更新文档"></a>4.4 更新文档</h3><p>同 4.2，将 GET 改为 PUT，将更新已存在的文档。</p>
<h3 id="4-5-检查文档是否存在"><a href="#4-5-检查文档是否存在" class="headerlink" title="4.5 检查文档是否存在"></a>4.5 检查文档是否存在</h3><p>同 4.2，将 GET 改为 HEAD，将检查指定ID的文档是否存在。</p>
<h2 id="五、分布式特性"><a href="#五、分布式特性" class="headerlink" title="五、分布式特性"></a>五、分布式特性</h2><p>Elasticsearch 可以横向扩展至数百（甚至数千）台服务器节点，同时可以处理PB级数据，并且在设计时屏蔽了分布式的复杂性。</p>
<p>这里列举一些在后台自动执行的操作：</p>
<ul>
<li>分配文档到不同的容器或分片中，文档可以存储在一个或多个节点中</li>
<li>按集群节点来均衡分配这些分片，从而对索引和搜索过程进行负载均衡</li>
<li>复制诶个分片以支持数据冗余，从而防止硬件故障导致的数据丢失</li>
<li>将集群中任一节点的请求路由到存有相关数据的节点</li>
<li>集群扩容时无缝整合新节点，重新分配分片以便从离群节点恢复</li>
</ul>
<p>本书中包含分布式特性的补充章节。如：集群扩容、故障转移（集群内的原理）、应对文档存储（分布式文档存储）、执行分布式检索、分区及分片内部原理。这些章节非必读，无需了解就能使用 Elasticsearch，但是它们将帮助你了解更完整的 ES 知识。</p>
<h2 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h2><ol>
<li><p>ES 启动失败1</p>
<ol>
<li>异常信息：<code>Error occurred during initialization of VM ，Could not reserve enough space for 2097152KB object heap</code></li>
<li>原因：不能为堆对象保留2G的空间，内存空间不足</li>
<li>解决方案1：修改jvm配置，编辑<code>config/jvm.options</code>，修改<code>-Xms512m -Xmx512m</code> 即可。</li>
<li>解决方案2：增加启动参数，<code>ES_JAVA_OPTS=&quot;-Xms512m -Xmx512m ./bin/elasticsearch&quot;</code></li>
<li>解决方案3：如果都没有用，请检查Windows的环境变量，是否是以前装过ES并做了相关服务，如果有，则删掉之前的配置</li>
</ol>
</li>
<li><p>ES 启动警告</p>
<ol>
<li>警告信息：<code>future versions of Elasticsearch will require Java 11;</code></li>
<li>解决方案：警告最好使用java11，但是会向下兼容。不需要处理</li>
</ol>
</li>
<li><p>ES 启动失败2</p>
<ol>
<li>错误信息：<code>org.elasticsearch.bootstrap.StartupException: ElasticsearchException[X-Pack is not supported and Machine Learning is not available for [windows-x86]; you can use the other X-Pack features (unsupported) by setting xpack.ml.enabled: false in elasticsearch.yml]</code></li>
<li>原因：X-Pack 不支持Windows</li>
<li>解决方案：编辑<code>config/elasticsearch.yml</code>，添加一行<code>xpack.ml.enabled: false</code></li>
</ol>
</li>
<li><p>聚合查询错误：</p>
<ol>
<li><p>执行操作：<code>curl -X GET &#39;localhost:9200/megacorp/employee/_search&#39; -H &quot;Content-Type: application/json&quot; -d {&quot;aggs&quot;: {&quot;all_interests&quot;: {&quot;terms&quot;: {&quot;field&quot;: &quot;interests&quot;,&quot;size&quot;: 10}}}}</code></p>
</li>
<li><p>异常信息：</p>
</li>
<li><pre><code class="json">{
  &quot;error&quot; : {
    &quot;root_cause&quot; : [
      {
        &quot;type&quot; : &quot;illegal_argument_exception&quot;,
        &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [interests] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;
      }
    ],
    &quot;type&quot; : &quot;search_phase_execution_exception&quot;,
    &quot;reason&quot; : &quot;all shards failed&quot;,
    &quot;phase&quot; : &quot;query&quot;,
    &quot;grouped&quot; : true,
    &quot;failed_shards&quot; : [
      {
        &quot;shard&quot; : 0,
        &quot;index&quot; : &quot;megacorp&quot;,
        &quot;node&quot; : &quot;BbhnQSaTTHyA8KDYnk2IJg&quot;,
        &quot;reason&quot; : {
          &quot;type&quot; : &quot;illegal_argument_exception&quot;,
          &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [interests] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;
        }
      }
    ],
    &quot;caused_by&quot; : {
      &quot;type&quot; : &quot;illegal_argument_exception&quot;,
      &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [interests] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;,
      &quot;caused_by&quot; : {
        &quot;type&quot; : &quot;illegal_argument_exception&quot;,
        &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [interests] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;
      }
    }
  },
  &quot;status&quot; : 400
}</code></pre>
</li>
<li><p>原因：需要聚合的字段 <code>interests</code> 没有进行优化，也没有加索引。而 ES 默认禁止聚合/排序没有优化的字段。</p>
</li>
<li><p>解决方法：将需要聚合的字段添加优化。<code>curl -X PUT &quot;localhost:9200/megacorp/_mapping?pretty&quot; -H &quot;Content-Type: application/json&quot; -d  {&quot;properties&quot;: {&quot;interests&quot;: {&quot;type&quot;: &quot;text&quot;,&quot;fielddata&quot;: true}}}</code></p>
</li>
</ol>
</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/08/07/后端/ElasticSearch/序言/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-08-07</time><div class="content"><h1 id="ElasticSearch-权威指南"><a href="#ElasticSearch-权威指南" class="headerlink" title="ElasticSearch 权威指南"></a>ElasticSearch 权威指南</h1><p><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html" target="_blank" rel="noopener">ElasticSearch</a> 是一个分布式、可扩展、实时的搜索与数据分析引擎。</p>
<h2 id="一、目录导航"><a href="#一、目录导航" class="headerlink" title="一、目录导航"></a>一、目录导航</h2><p>本书分为七个部分：</p>
<ul>
<li>介绍ElasticSearch<ul>
<li>ElasticSearch 的数据输入输出及如何处理你的文档数据，如何进行基本的搜索操作和管理你的索引</li>
</ul>
</li>
<li>结构化搜索和控制相关度<ul>
<li>深入了解搜索的高级特性，如临近词和部分匹配来索引和查询数据</li>
<li>了解相关度评分是如何工作的以及如何控制它来确保第一页总是返回最佳搜索结果</li>
</ul>
</li>
<li>处理各种语言和拼写错误<ul>
<li>使用分析器和查询来处理问题，从简单的语言分析下手，如字母表和排序、词干提取、停用词、同义词、模糊匹配</li>
</ul>
</li>
<li>高阶概念、Doc Values and Fielddata 讨论聚合和分析<ul>
<li>对数据进行摘要化和分组来呈现总体趋势</li>
</ul>
</li>
<li>地理位置检索方式：地理坐标点和地理形状</li>
<li>关联关系处理和扩容设计</li>
<li>监控和部署<ul>
<li>讨论生产环境上线的重要配置、监控点以及如何诊断以避免出现问题</li>
</ul>
</li>
</ul>
<blockquote>
<p>本文仅做个人笔记使用，详细信息请参考<a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html" target="_blank" rel="noopener">ElasticSearch 权威指南</a></p>
</blockquote>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/23/运维/docker/2.免Sudo使用Docker/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-23</time><div class="content"><p>在每次使用 docker 时，都需要使用 sudo 前缀。</p>
<pre><code class="tex">Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.26/images/json: dial unix /var/run/docker.sock: connect: permission denied</code></pre>
<pre><code class="sh"># 添加 Docker 组
$ sudo groupadd docker
# 将用户加入组
$ sudo gpasswd -a ${USER} docker
# 重启 Docker 服务
$ sudo service docker restart
# 切换当前会话
$ newgrp - docker</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/23/运维/docker/1.安装Docker/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-23</time><div class="content"><h1 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h1><h2 id="一、移除旧版本"><a href="#一、移除旧版本" class="headerlink" title="一、移除旧版本"></a>一、移除旧版本</h2><pre><code class="sh">$ sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre>
<h2 id="二、设置仓库"><a href="#二、设置仓库" class="headerlink" title="二、设置仓库"></a>二、设置仓库</h2><h3 id="1-安装-curl-及使用-https"><a href="#1-安装-curl-及使用-https" class="headerlink" title="1. 安装 curl 及使用 https"></a>1. 安装 curl 及使用 https</h3><pre><code class="sh">$ sudo apt-get update

$ sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common</code></pre>
<h3 id="2-添加-GPG-key"><a href="#2-添加-GPG-key" class="headerlink" title="2. 添加 GPG key"></a>2. 添加 GPG key</h3><pre><code class="sh">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre>
<h3 id="3-设置存储库"><a href="#3-设置存储库" class="headerlink" title="3. 设置存储库"></a>3. 设置存储库</h3><pre><code class="sh">$ sudo add-apt-repository \
   &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable&quot;</code></pre>
<h2 id="三、安装Docker-Engine"><a href="#三、安装Docker-Engine" class="headerlink" title="三、安装Docker Engine"></a>三、安装Docker Engine</h2><h3 id="1-安装-docker-engine-及-containerd"><a href="#1-安装-docker-engine-及-containerd" class="headerlink" title="1. 安装 docker engine 及 containerd"></a>1. 安装 docker engine 及 containerd</h3><pre><code class="sh">$ sudo apt-get update
$ sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre>
<h3 id="2-安装指定版本"><a href="#2-安装指定版本" class="headerlink" title="2. 安装指定版本"></a>2. 安装指定版本</h3><pre><code class="sh">$ apt-cache madison docker-ce

  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 18.06.1~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 18.06.0~ce~3-0~ubuntu       | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages
  ...</code></pre>
<h3 id="3-测试"><a href="#3-测试" class="headerlink" title="3. 测试"></a>3. 测试</h3><pre><code class="sh">$ sudo docker run hello-world</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/02/前端/Ant Motion/动效原则/动画术语/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-02</time><div class="content"><h1 id="animate-term-动画术语"><a href="#animate-term-动画术语" class="headerlink" title="animate term 动画术语"></a>animate term 动画术语</h1><h2 id="基本style可动画参数"><a href="#基本style可动画参数" class="headerlink" title="基本style可动画参数"></a>基本style可动画参数</h2><table>
<thead>
<tr>
<th align="center">参数名称</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">width</td>
<td align="left"><code>{ width: 100 }</code> 元素当前宽度到 100px</td>
</tr>
<tr>
<td align="center">maxWidth</td>
<td align="left"><code>{ maxWidth: 100 }</code> 元素当前最大宽度到 100px</td>
</tr>
<tr>
<td align="center">minWidth</td>
<td align="left"><code>{ minWidth: 100 }</code> 元素当前最小宽度到 100px</td>
</tr>
<tr>
<td align="center">height</td>
<td align="left"><code>{ height: 100 }</code> 元素当前高度到 100px</td>
</tr>
<tr>
<td align="center">maxHeight</td>
<td align="left"><code>{ maxHeight: 100 }</code> 元素当前最大高度到 100px</td>
</tr>
<tr>
<td align="center">minHeight</td>
<td align="left"><code>{ minHeight: 100 }</code> 元素当前最小高度到 100px</td>
</tr>
<tr>
<td align="center">lineHeight</td>
<td align="left"><code>{ lineHeight: 100 }</code> 区块行高到 100px</td>
</tr>
<tr>
<td align="center">opacity</td>
<td align="left"><code>{ opacity: 0 }</code> 元素当前透明度到 0</td>
</tr>
<tr>
<td align="center">top</td>
<td align="left"><code>{ top: 100 }</code> 元素当前顶部距离到 100px, 需配合 `position: relative</td>
</tr>
<tr>
<td align="center">right</td>
<td align="left"><code>{ right: 100 }</code> 元素当前右部距离到 100px, 需配合 `position: relative</td>
</tr>
<tr>
<td align="center">bottom</td>
<td align="left"><code>{ bottom: 100 }</code> 元素当前下部距离到 100px, 需配合 `position: relative</td>
</tr>
<tr>
<td align="center">left</td>
<td align="left"><code>{ left: 100 }</code> 元素当前左部距离到 100px, 需配合 `position: relative</td>
</tr>
<tr>
<td align="center">marginTop</td>
<td align="left"><code>{ marginTop: 100 }</code> 元素当前顶部外边距离到 100px</td>
</tr>
<tr>
<td align="center">marginRight</td>
<td align="left"><code>{ marginRight: 100 }</code> 元素当前右部外边距离到 100px</td>
</tr>
<tr>
<td align="center">marginBottom</td>
<td align="left"><code>{ marginBottom: 100 }</code> 元素当前下部外边距离到 100px</td>
</tr>
<tr>
<td align="center">marginLeft</td>
<td align="left"><code>{ marginLeft: 100 }</code> 元素当前左部外边距离到 100px</td>
</tr>
<tr>
<td align="center">paddingTop</td>
<td align="left"><code>{ paddingTop: 100 }</code> 元素当前顶部内边距离到 100px</td>
</tr>
<tr>
<td align="center">paddingRight</td>
<td align="left"><code>{ paddingRight: 100 }</code> 元素当前右部内边距离到 100px</td>
</tr>
<tr>
<td align="center">paddingBottom</td>
<td align="left"><code>{ paddingBottom: 100 }</code> 元素当前下部内边距离到 100px</td>
</tr>
<tr>
<td align="center">paddingLeft</td>
<td align="left"><code>{ paddingLeft: 100 }</code> 元素当前左部内边距离到 100px</td>
</tr>
<tr>
<td align="center">color</td>
<td align="left"><code>{ color: &#39;#FFFFFF&#39; }</code> 元素当前文字颜色到白色</td>
</tr>
<tr>
<td align="center">backgroundColor</td>
<td align="left"><code>{ backgroundColor: &#39;#FFFFFF&#39; }</code> 元素当前背景颜色到白色</td>
</tr>
<tr>
<td align="center">borderWidth</td>
<td align="left"><code>{ borderWidth: 2 }</code> 元素当前边框宽度到 2px，同样可用 <code>borderTopWidth</code> <code>borderRightWidth</code> <code>borderBottomWidth</code> <code>borderLeftWidth</code></td>
</tr>
<tr>
<td align="center">borderRadius</td>
<td align="left"><code>{ borderRadius: 5 }</code> 元素当前圆角到 5px, 同上, 同样可用 <code>上 左 下 右</code></td>
</tr>
<tr>
<td align="center">borderColor</td>
<td align="left"><code>{ borderColor: &#39;#FFFFFF&#39; }</code> 元素当前边框颜色到白色</td>
</tr>
<tr>
<td align="center">boxShadow</td>
<td align="left"><code>{ boxShadow: &#39;0 0 10px #000&#39; }</code> 元素当前阴影模糊到 10px</td>
</tr>
<tr>
<td align="center">textShadow</td>
<td align="left"><code>{ textShadow: &#39;0 0 10px #000&#39; }</code> 元素当前文字内容阴影模糊到 10px</td>
</tr>
</tbody></table>
<h2 id="transform-参数"><a href="#transform-参数" class="headerlink" title="transform 参数"></a>transform 参数</h2><table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">translateX / x</td>
<td align="left"><code>{ translateX: 10 } or { x: 10 } =&gt; transform: translateX(10px)</code>, x 方向的位置移动 10px</td>
</tr>
<tr>
<td align="left">translateY / y</td>
<td align="left"><code>{ translateY: 10 } or { y: 10 } =&gt; transform: translateY(10px)</code>, y 方向的位置移动 10px</td>
</tr>
<tr>
<td align="left">translateZ / z</td>
<td align="left"><code>{ translateZ: 10 } or { z: 10 } =&gt; transform: translateZ(10px)</code>, z 方向的位置移动 10px</td>
</tr>
<tr>
<td align="left">rotate</td>
<td align="left"><code>{ rotate: 10 } =&gt; transform: rotate(10deg)</code> 元素以 transformOrigin 的中心点旋转 10deg</td>
</tr>
<tr>
<td align="left">rotateX</td>
<td align="left"><code>{ rotateX: 10 } =&gt; transform: rotateX(10deg)</code> 元素以 transformOrigin 的中心点向 X 旋转 10deg</td>
</tr>
<tr>
<td align="left">rotateY</td>
<td align="left"><code>{ rotateY: 10 } =&gt; transform: rotateY(10deg)</code> 元素以 transformOrigin 的中心点向 Y 旋转 10deg</td>
</tr>
<tr>
<td align="left">scale</td>
<td align="left"><code>{ scale: 0 } =&gt; transform: scale(0)</code> 元素以 transformOrigin 的中心点缩放到 0, 不改变元素的宽高</td>
</tr>
<tr>
<td align="left">scaleX</td>
<td align="left"><code>{ scaleX: 0 } =&gt; transform: scaleX(0)</code> 元素以 transformOrigin 的中心点 X 缩放到 0, 不改变元素的宽高</td>
</tr>
<tr>
<td align="left">scaleY</td>
<td align="left"><code>{ scaleY: 0 } =&gt; transform: scaleY(0)</code> 元素以 transformOrigin 的中心点 Y 缩放到 0, 不改变元素的宽高</td>
</tr>
<tr>
<td align="left">transformOrigin</td>
<td align="left"><code>{ transformOrigin: &#39;50px 50px&#39;}</code> 元素当前中心点到 x: 50px y: 50px;</td>
</tr>
</tbody></table>
<h2 id="filter-参数"><a href="#filter-参数" class="headerlink" title="filter 参数"></a>filter 参数</h2><table>
<thead>
<tr>
<th align="center">参数名称</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">grayScale</td>
<td align="center"><code>{ grayScale: 1 }</code> 元素 filter 灰度到 100%;</td>
</tr>
<tr>
<td align="center">sepia</td>
<td align="center"><code>{ sepia: 1 }</code> 元素 filter 颜色到 100%;</td>
</tr>
<tr>
<td align="center">hueRotate</td>
<td align="center"><code>{ hueRotate: &#39;90deg&#39; }</code> 元素 filter 色相盘旋转 90 度;</td>
</tr>
<tr>
<td align="center">invert</td>
<td align="center"><code>{ invert: 1 }</code> 元素 filter 色值反相到 100%</td>
</tr>
<tr>
<td align="center">brightness</td>
<td align="center"><code>{ brightness: 2 }</code> 元素 filter 亮度到 200%</td>
</tr>
<tr>
<td align="center">contrast</td>
<td align="center"><code>{ contrast: 2 }</code> 对比度到 200%</td>
</tr>
<tr>
<td align="center">saturate</td>
<td align="center"><code>{ saturate: 2 }</code> 饱和度到 200%</td>
</tr>
<tr>
<td align="center">blur</td>
<td align="center"><code>{ blur: &#39;20px&#39; }</code> 模糊到 20px</td>
</tr>
</tbody></table>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/02/前端/Ant Motion/动效原则/动效/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-02</time><div class="content"><h1 id="Ant-Motion-动效原则"><a href="#Ant-Motion-动效原则" class="headerlink" title="Ant Motion 动效原则"></a>Ant Motion 动效原则</h1><h2 id="一、Motion-动效"><a href="#一、Motion-动效" class="headerlink" title="一、Motion 动效"></a>一、Motion 动效</h2><p>界面动效能加强用户认知且增加活力。</p>
<h3 id="1-1-动效价值"><a href="#1-1-动效价值" class="headerlink" title="1.1 动效价值"></a>1.1 动效价值</h3><ul>
<li>增加体验舒适度：让用户认知过程更加自然</li>
<li>增加界面活力：第一时间吸引注意力，突出重点</li>
<li>描述层级关系：体现元素之间的层级与空间关系</li>
<li>提供反馈、明确意向：助力交互体验</li>
</ul>
<h3 id="1-2-衡量动效意义"><a href="#1-2-衡量动效意义" class="headerlink" title="1.2 衡量动效意义"></a>1.2 衡量动效意义</h3><ul>
<li>动效的存在是否合理</li>
<li>动效与性能：不能出现大幅度波动丢帧与卡顿现象，不能影响产品性能</li>
</ul>
<h2 id="二、Principle-原则"><a href="#二、Principle-原则" class="headerlink" title="二、Principle 原则"></a>二、Principle 原则</h2><h3 id="2-1-自然"><a href="#2-1-自然" class="headerlink" title="2.1 自然"></a>2.1 自然</h3><p>自然运动规律，保证视觉连贯，让用户感知到动作是自然的。</p>
<h3 id="2-2-高效"><a href="#2-2-高效" class="headerlink" title="2.2 高效"></a>2.2 高效</h3><p>尽量节省过渡的时间，快速完成过渡的动画效果。</p>
<h3 id="2-3-克制"><a href="#2-3-克制" class="headerlink" title="2.3 克制"></a>2.3 克制</h3><p>做有意义的动效，不去做太多的修饰而干扰用户。</p>
<h2 id="三、Speed-速度"><a href="#三、Speed-速度" class="headerlink" title="三、Speed 速度"></a>三、Speed 速度</h2><p>速度的快或慢取决于时间与缓动，相同的距离，时间越短速度则越快，而缓动则是能将同一段时间划分快与慢的区域。</p>
<h2 id="四、Space-空间"><a href="#四、Space-空间" class="headerlink" title="四、Space 空间"></a>四、Space 空间</h2><p>现实空间里，物体存在远小近大的原则，运动则有远慢近快。在动效设计时，处理和空间相关的话题时，我们需要考虑两方面的因素：</p>
<ul>
<li><strong>视差：</strong>例如汽车在公路上行驶，离汽车越近的物体，移动速度越接近汽车的速率。以行进中的汽车为例，汽车所在的点为 X 轴的基准点，离基准点越远时，速度就越慢。动效设计中同样存在这个原则，元素的空间距离会影响动画效果，从而影响动效设计的决策。</li>
<li><strong>大小：</strong>遵循远处的物体小，近处的物体大的原则。</li>
</ul>
<h2 id="五、Combined-组合"><a href="#五、Combined-组合" class="headerlink" title="五、Combined 组合"></a>五、Combined 组合</h2><p>组合动效是将多种动画效果组合起来运用在单个元素或者界面中的表现方式，吸引用户的注意，让用户快速了解信息的主次关系。ant design 最常用的组合动效有以下三种：</p>
<ul>
<li>单元素组合动画：单元素组合动画是指将多个动画参数附加于一个元素上，通过不同的动画参数帮助用户实现自然的认知过程。</li>
<li>多元素列队动画：队列一般指同个区块里多个元素的进场或出场，根据元素的排列顺序，有序的进入或依次的退出，实现更为自然的视觉过渡。</li>
<li>多元素聚散动画：以中心点为主向外扩散或汇聚的一个效果，强调主体以及分支之间的关系，能够快速的让用户了解信息的关联性。</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/02/前端/Ant Motion/README/">无题</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-02</time><div class="content"></div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By koral</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>